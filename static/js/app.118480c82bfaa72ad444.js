webpackJsonp([44],{"/07k":function(t,e){},0:function(t,e){},"9Ez+":function(t,e){},AvcD:function(t,e){},Ba12:function(t,e){},Bkrn:function(t,e){t.exports={"üëå Socket connected.":"üëå –ï—Å—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç.","üëé Socket error.":"üëé –û—à–∏–±–∫–∞ —Å–≤—è–∑–∏.","üç∏ Ready.":"üç∏ –ì–æ—Ç–æ–≤.","üí™ Let the fight begin!":"üí™ –î–∞ –Ω–∞—á–Ω—ë—Ç—Å—è –±–∏—Ç–≤–∞!","now known as":"—Ç–µ–ø–µ—Ä—å","üîó Joined.":"üîó –î–æ–±–∞–≤–ª–µ–Ω.","üí£ New challenge":"üí£ –ù–æ–≤—ã–π –≤—ã–∑–æ–≤","üòù Muff":"üòù –ú–∏–º–æ","‚ò†Ô∏è Lost":"‚ò†Ô∏è –ü–æ—Ç–æ–ø–∏–ª","üî• Damaged":"üî• –†–∞–Ω–∏–ª","Your turn!":"–í–∞—à —Ö–æ–¥!","üì° Connecting...":"üì° –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ...","üëë üòé üéá üèÜ Won!":"üëë üòé üéá üèÜ –ü–æ–±–µ–¥–∏–ª!","üéÆ New game:":"üéÆ –ù–æ–≤–∞—è –∏–≥—Ä–∞:",Accept:"–ü—Ä–∏–Ω—è—Ç—å",Captain:"–ö–∞–ø–∏—Ç–∞–Ω","Join Game":"–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è",Game:"–ò–≥—Ä–∞",Rules:"–ü—Ä–∞–≤–∏–ª–∞",DeveloperInfo:"<b>–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:</b> <br> –ê–ª–µ–∫—Å–µ–π –§–æ–º–∏–Ω—ã—Ö <a href=mailto:asfom@mail.ru>asfom@mail.ru</a>","Frontend:":"Frontend:","Backend:":"Backend:","Take a disposition.":"–ó–∞–π–º–∏—Ç–µ –ø–æ–∑–∏—Ü–∏–∏.","Ready?":"–ì–æ—Ç–æ–≤–æ?",Clear:"–û—á–∏—Å—Ç–∏—Ç—å","Send this link ...":"–û—Ç–ø—Ä–∞–≤—å—Ç–µ —ç—Ç—É —Å—Å—ã–ª–∫—É –≤—Ç–æ—Ä–æ–º—É –∫–∞–ø–∏—Ç–∞–Ω—É –¥–ª—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –≤ –∏–≥—Ä—É.",Link:"–°—Å—ã–ª–∫–∞","Copy link":"–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É","The link is copied.":"–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞.","New game":"–ù–æ–≤–∞—è –∏–≥—Ä–∞",Battleship:"–ú–æ—Ä—Å–∫–æ–π –±–æ–π",Rules01:"<p> –ò–≥—Ä–∞ –¥–ª—è –¥–≤—É—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, –≤&nbsp;–∫–æ—Ç–æ—Ä–æ–π –∏–≥—Ä–æ–∫–∏ –ø–æ&nbsp;–æ—á–µ—Ä–µ–¥–∏ –Ω–∞–∑—ã–≤–∞—é—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–∞&nbsp;–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–π –∏–º&nbsp;–∫–∞—Ä—Ç–µ —Å–æ–ø–µ—Ä–Ω–∏–∫–∞. –ï—Å–ª–∏ —É&nbsp;—Å–æ–ø–µ—Ä–Ω–∏–∫–∞ –ø–æ&nbsp;—ç—Ç–∏–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º –∏–º–µ–µ—Ç—Å—è –∫–æ—Ä–∞–±–ª—å (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∑–∞–Ω—è—Ç—ã), —Ç–æ&nbsp;–∫–æ—Ä–∞–±–ª—å –∏–ª–∏ –µ–≥–æ —á–∞—Å—Ç—å &laquo;—Ç–æ–ø–∏—Ç—Å—è&raquo;, –∞&nbsp;–ø–æ–ø–∞–≤—à–∏–π –ø–æ–ª—É—á–∞–µ—Ç –ø—Ä–∞–≤–æ —Å–¥–µ–ª–∞—Ç—å –µ—â—ë –æ–¥–∏–Ω —Ö–æ–¥. –¶–µ–ª—å –∏–≥—Ä–æ–∫–∞&nbsp;&mdash; –ø–µ—Ä–≤—ã–º –ø–æ—Ç–æ–ø–∏—Ç—å –≤—Å–µ –∫–æ—Ä–∞–±–ª–∏ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞. </p>",Ships:"–ö–æ—Ä–∞–±–ª–∏","Type of ship":"–¢–∏–ø –∫–æ—Ä–∞–±–ª—è",Quantity:"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ","Battleship (four-decker)":"–õ–∏–Ω–∫–æ—Ä (—á–µ—Ç—ã—Ä—ë—Ö–ø–∞–ª—É–±–Ω—ã–π)","Cruiser (three-decker)":"–ö—Ä–µ–π—Å–µ—Ä (—Ç—Ä—ë—Ö–ø–∞–ª—É–±–Ω—ã–π)","Destroyer (two-decker)":"–≠—Å–º–∏–Ω–µ—Ü (–¥–≤—É—Ö–ø–∞–ª—É–±–Ω—ã–π)","Submarine (single-decker)":"–¢–æ—Ä–ø–µ–¥–Ω—ã–π –∫–∞—Ç–µ—Ä (–æ–¥–Ω–æ–ø–∞–ª—É–±–Ω—ã–π)",Name:"–ò–º—è","Change random name":"–ù–æ–≤–æ–µ —Å–ª—É—á–∞–π–Ω–æ–µ –∏–º—è","or sign in:":"–í—Ö–æ–¥:",Email:"–≠–ª. –ø–æ—á—Ç–∞",Password:"–ü–∞—Ä–æ–ª—å","Sign in":"–í–æ–π—Ç–∏","The secret code was send on email":"–°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –ø–æ—á—Ç—É","Secret code":"–°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥",Confirm:"–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å","I didn`t get it":"–Ø –Ω–µ –ø–æ–ª—É—á–∏–ª –∫–æ–¥","Signed in.":"–í–æ—à—ë–ª.",Busy:"–ó–∞–Ω—è—Ç–æ","Change name":"–°–º–µ–Ω–∏—Ç—å –∏–º—è","Change email":"–°–º–µ–Ω–∏—Ç—å —ç–ª. –ø–æ—á—Ç—É","Sign Out":"–í—ã–π—Ç–∏","In English":"In English",signedAdvantages:"–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è, –∏—Å–∫–∞—Ç—å –∏&nbsp;–ø—Ä–∏–≥–ª–∞—à–∞—Ç—å –¥—Ä—É–≥–∏—Ö –∏–≥—Ä–æ–∫–æ–≤.",Message:"–°–æ–æ–±—â–µ–Ω–∏–µ","Connection error":"–û—à–∏–±–∫–∞ —Å–≤—è–∑–∏",offline:"–Ω–µ –≤ —Å–µ—Ç–∏","Sign in to send messages":"–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è"}},EYIR:function(t,e){t.exports={DeveloperInfo:"<b>Developer:</b> <br> Alexey Fominykh <a href=mailto:asfom@mail.ru>asfom@mail.ru</a>","Send this link ...":"Send this link to&nbsp;the second captain to&nbsp;join your game.",Rules01:"<p> Battleship (also Battleships or&nbsp;Sea Battle) is&nbsp;a&nbsp;guessing game for two players. It&nbsp;is&nbsp;played on&nbsp;ruled grids (paper or&nbsp;board) on&nbsp;which the players&rsquo; fleets of&nbsp;ships (including battleships) are marked. The locations of&nbsp;the fleet are concealed from the other player. Players alternate turns calling &ldquo;shots&rdquo; at&nbsp;the other player&rsquo;s ships, and the objective of&nbsp;the game is&nbsp;to&nbsp;destroy the opposing player&rsquo;s fleet. </p> <p> Battleship is&nbsp;known worldwide as&nbsp;a&nbsp;pencil and paper game which dates from World War I. It&nbsp;was published by&nbsp;various companies as&nbsp;a&nbsp;pad-and-pencil game in&nbsp;the 1930s, and was released as&nbsp;a&nbsp;plastic board game by&nbsp;Milton Bradley in&nbsp;1967. The game has spawned electronic versions, video games, smart device apps and a&nbsp;film. </p>","In English":"–ü–æ-—Ä—É—Å—Å–∫–∏",signedAdvantages:"Signed users can send messages, search and invite other players."}},KvgI:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),i=s("kG3H"),n=s.n(i),o={props:{options:{type:Object,default:function(){return{}}}},mounted:function(){this.init()},beforeDestroy:function(){this.flickity.destroy(),this.flickity=null},methods:{init:function(){this.flickity=new n.a(this.$el,this.options),this.$emit("init",this.flickity)},next:function(t,e){this.flickity.next(t,e)},previous:function(t,e){this.flickity.previous(t,e)},select:function(t,e,s){this.flickity.select(t,e,s)},selectedIndex:function(){return this.flickity.selectedIndex},selectCell:function(t,e,s){this.flickity.selectCell(t,e,s)},resize:function(){this.flickity.resize()},reposition:function(){this.flickity.reposition()},prepend:function(t){this.flickity.prepend(t)},append:function(t){this.flickity.append(t)},insert:function(t,e){this.flickity.insert(t,e)},remove:function(t){this.flickity.remove(t)},playPlayer:function(){this.flickity.playPlayer()},stopPlayer:function(){this.flickity.stopPlayer()},pausePlayer:function(){this.flickity.pausePlayer()},unpausePlayer:function(){this.flickity.unpausePlayer()},rerender:function(){this.flickity.destroy(),this.init()},destroy:function(){this.flickity.destroy()},reloadCells:function(){this.flickity.reloadCells()},getCellElements:function(){this.flickity.getCellElements()},data:function(){return n.a.data(this.$el)},on:function(t,e){this.flickity.on(t,e)},off:function(t,e){this.flickity.off(t,e)},once:function(t,e){this.flickity.once(t,e)}}},r={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._t("default")],2)},staticRenderFns:[]},c=s("VU/8")(o,r,!1,null,null,null).exports,l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("transition",{attrs:{name:"show"}},[s("div",{staticClass:"Notify"},[s("div",{staticClass:"form"},[s("div",{staticClass:"Notify-msg"},[t._v("\n          Capitan Flint\n          "),s("br"),t._v("\n          challenged for a new round.\n        ")]),t._v(" "),s("div",{staticClass:"Notify-btns"},[s("button",{on:{click:t.accept}},[t._v("Accept")]),t._v(" "),s("button",{staticClass:"deny",on:{click:t.deny}},[t._v("Deny")])])])])])],1)},staticRenderFns:[]};var d=s("VU/8")({name:"Notify",data:function(){return{}},computed:{console:function(){return this.$store.state.console}},methods:{accept:function(){},deny:function(){}}},l,!1,function(t){s("jB5O")},"data-v-7428e802",null).exports,u=s("EtMI"),h=s.n(u),m={name:"Bar",data:function(){return{t:u.t,flickityOptions:{draggable:!0,freeScroll:!0,contain:!0,prevNextButtons:!1,pageDots:!1,cellAlign:"left"},flickityVector:"init"}},computed:{title:function(){return this.$route.meta.title?Object(u.t)(this.$route.meta.title):""},captain:function(){return this.$store.state.user.__v?this.$store.state.user.name:Object(u.t)("Captain")},flickityStyle:function(){return this.flickityVector>0?"background: rgba(60,120,120, "+(.7-this.flickityVector/this.$store.state.gameDisplay.width*.7)+");":"init"===this.flickityVector?"opacity:0;":""}},mounted:function(){this.$nextTick(function(){var t=this;this.resetFlickityVector(),this.$refs.flickity.on("dragMove",function(e,s,a){t.flickityVector=a.x}),this.$refs.flickity.on("dragEnd",function(e,s){t.flickityVector>0&&t.closeMenu()}),this.$refs.flickity.on("staticClick",function(e,s,a,i){void 0===i&&t.closeMenu()})})},methods:{switchLang:function(){this.$store.commit("switchLang")},switchMenu:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$store.commit("setBarMenuOpen",t),this.resetFlickityVector()},closeMenu:function(){this.switchMenu(!1)},resetFlickityVector:function(){var t=this;setTimeout(function(){t.flickityVector=0},490)}},components:{Flickity:c,Notify:d}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Bar",attrs:{id:"Bar"}},[s("div",{staticClass:"plr"},[s("router-link",{staticClass:"Bar__logo",attrs:{to:"/"}}),t._v(" "),s("div",{staticClass:"Bar-title"},[t._v(t._s(t.title))]),t._v(" "),s("div",{staticClass:"Bar-menu"},[s("div",{staticClass:"Bar-menu__icon",on:{click:function(e){t.switchMenu()}}})])],1),t._v(" "),s("flickity",{ref:"flickity",staticClass:"Bar-menu-panel-flickity",style:t.flickityStyle,attrs:{options:t.flickityOptions}},[s("div",{staticClass:"Bar-menu-panel plr"},[s("div",{staticClass:"Bar-menu__item"},[s("i",[t._v("üë§")]),t._v(" "),s("router-link",{attrs:{to:"/user/"}},[t._v(t._s(t.captain))])],1),t._v(" "),s("div",{staticClass:"Bar-menu__item"},[s("i",[t._v("üéÆ")]),t._v(" "),s("router-link",{attrs:{to:"/game/"}},[t._v(t._s(t.t("Game")))])],1),t._v(" "),s("div",{staticClass:"Bar-menu__item"},[s("i",[t._v("üìë")]),t._v(" "),s("router-link",{attrs:{to:"/rules/"}},[t._v(t._s(t.t("Rules")))])],1),t._v(" "),s("div",{staticClass:"Bar-menu__item"},[s("i",[t._v("üîå")]),t._v(" "),s("router-link",{attrs:{to:"/console/"}},[t._v("Console")])],1),t._v(" "),s("div",{staticClass:"Bar-menu__item"},[s("i",[t._v("¬©")]),t._v(" "),s("router-link",{attrs:{to:"/about/"}},[t._v("About")])],1),t._v(" "),s("div",{staticClass:"Bar-menu__line"}),t._v(" "),s("div",{staticClass:"Bar-menu__item",on:{click:t.switchLang}},[s("i",[t._v("üòõ")]),t._v(" "+t._s(t.t("In English")))])])])],1)},staticRenderFns:[]};var v=s("VU/8")(m,p,!1,function(t){s("/07k")},null,null).exports,f=s("z9mE"),_=s.n(f),b=!1,g=null,y={name:"Send",data:function(){return{t:u.t,sendMsg:"",rows:1,disabled:!1}},props:["user0connect","user1connect"],computed:{token:function(){return!!this.$store.state.user.tokens},placeholder:function(){return this.token?this.user0connect?this.user1connect?Object(u.t)("Message"):this.$store.state.game.user1.name+" "+Object(u.t)("offline"):Object(u.t)("Connection error"):Object(u.t)("Sign in to send messages")}},methods:{lines:function(t){if("Shift"===t.key&&(b=!0,clearTimeout(g),g=setTimeout(function(){b=!1},500)),!b&&"Enter"===t.key)return t.preventDefault(),void this.send(t);var e=document.getElementById("Send-textarea").clientWidth/10,s=0;this.sendMsg.split("\n").map(function(t){s++,t.length>e&&(s+=~~(t.length/e))}),this.rows=s},send:function(t){var e=this;this.sendMsg.trim()&&!t.shiftKey&&(this.disabled=!0,this.$store.dispatch("sendMessage",this.sendMsg.trim()).then(function(){e.sendMsg="",e.rows=1,e.disabled=!1}))}}},k={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Send",attrs:{id:"Send"}},[s("form",{staticClass:"form",on:{submit:function(e){e.preventDefault(),t.send(e)}}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.sendMsg,expression:"sendMsg"}],staticClass:"Send-textarea",attrs:{type:"text",id:"Send-textarea",resizable:"false",rows:t.rows,placeholder:t.placeholder,disabled:t.disabled||!t.token||!t.user0connect||!t.user1connect},domProps:{value:t.sendMsg},on:{keydown:t.lines,input:function(e){e.target.composing||(t.sendMsg=e.target.value)}}}),s("button",{staticClass:"Send-submit",attrs:{type:"submit"}},[t._v("‚Üë")])])])},staticRenderFns:[]};var C=s("VU/8")(y,k,!1,function(t){s("AvcD")},null,null).exports,w=new Date,B={name:"App",data:function(){return{transitionName:"slide-left",user0connect:!1,user1connect:!1,refresh:!1}},head:{meta:[{"http-equiv":"last-modified",content:w},{name:"Etag",content:w}]},computed:{home:function(){return"/"===this.$route.path},mainHeight:function(){return"height:"+this.$store.state.gameDisplay.mainHeight+"px;"},appClass:function(){return"land"+this.$store.state.gameDisplay.land+" Bar-menu-panel-open"+ +this.$store.state.barMenuOpened+(this.home?" home":"")+(this.refresh?" refresh":"")},pullStyle:function(){return"height:"+this.$store.state.gameDisplay.height+"px;"},version:function(){return this.$store.state.game.__v}},components:{Bar:v,"vue-pull-refresh":_.a,Send:C},methods:{windowResized:function(){this.$store.commit("setGameDisplay")},closeMenu:function(){this.$store.commit("setBarMenuOpen",!1)},tabFocus:function(){this.$store.commit("setTab",!0)},tabBlur:function(){this.$store.commit("setTab",!1)},onRefresh:function(){this.refresh=!0,window.location.reload(!0)},watchVersion:function(){this.user0connect=this.$store.state.io.connected,this.user1connect=this.$store.state.game.user1.connect}},watch:{$route:function(t,e){this.windowResized(),this.closeMenu();var s=t.path.split("/").length,a=e.path.split("/").length;this.transitionName=s<a?"slide-right":"slide-left",setTimeout(function(){document.getElementById("mainview").scrollTop=0},250)},version:function(){this.watchVersion()}},beforeCreate:function(){if(~this.$route.fullPath.indexOf("%C2%AD")){var t=this.$route.fullPath.replace(new RegExp("%C2%AD","g"),"");this.$router.push(t)}},created:function(){var t=this.$route.params.joinGameId;t&&t!==this.gameId?(this.$store.commit("setRedirect",!0),this.$store.dispatch("newGame",t)):this.$store.dispatch("createGame"),this.watchVersion()},mounted:function(){this.$nextTick(function(){this.windowResized(),window.addEventListener("resize",this.windowResized),window.addEventListener("focus",this.tabFocus),window.addEventListener("blur",this.tabBlur);var t=document.getElementById("app-start");t&&(t.className="out",setTimeout(function(){t.className="del"},3e3))})},beforeDestroy:function(){window.removeEventListener("resize",this.windowResized),window.removeEventListener("focus",this.tabFocus),window.removeEventListener("blur",this.tabBlur)}},x={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:t.appClass,attrs:{id:"App"}},[s("bar"),t._v(" "),s("vue-pull-refresh",{staticClass:"mainview",style:t.mainHeight,attrs:{"on-refresh":t.onRefresh,id:"mainview"}},[s("transition",{attrs:{name:t.transitionName}},[s("router-view",{attrs:{user0connect:t.user0connect,user1connect:t.user1connect}})],1)],1),t._v(" "),s("transition",{attrs:{name:"show-del2"}},[t.home?s("send",{attrs:{user0connect:t.user0connect,user1connect:t.user1connect}}):t._e()],1)],1)},staticRenderFns:[]};var $=s("VU/8")(B,x,!1,function(t){s("g4JP")},null,null).exports,L=s("/ocq"),I=s("pFYg"),M=s.n(I),E={render:function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"show"}},[this.text?e("div",{staticClass:"Text plr"},[e("div",{staticClass:"Text-text"},[this._v(this._s(this.text))])]):this._e()])},staticRenderFns:[]};var D=s("VU/8")({name:"Texts",data:function(){return{}},computed:{text:function(){return this.$store.state.text}}},E,!1,function(t){s("9Ez+")},null,null).exports,T=s("gRE1"),G=s.n(T),j={name:"Messages",data:function(){return{messages:[]}},computed:{messagesCounter:function(){return this.$store.state.messages.c}},methods:{showMessages:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=G()(this.$store.state.messages).reverse();s.pop(),this.messages=s,setTimeout(function(){if(s.map(function(s){(s=t.$store.state.messages[s._id]).pop0&&delete s.pop0,s.pop1&&delete s.pop1,!e&&s.loading&&Date.now()-s.time>1e4&&(s.lost=!0)}),e){var a=s[0]._id;if(t.$store.state.messages[a].pop1=!0,setTimeout(function(){delete t.$store.state.messages[a].pop1,t.showMessages()},500),s[0].direct){var i=document.getElementById("Messages").getBoundingClientRect().top,n=document.getElementById("Bar").offsetHeight+70,o=t.$store.state.gameDisplay.mainHeight-60,r=i<n?i-n:i>o?i-o:0;r&&(document.getElementById("mainview").scrollTop+=r)}}t.$store.commit("lsMessages")},100)}},watch:{messagesCounter:function(){this.showMessages(!0)}},created:function(){this.showMessages()}},N={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Messages plr",attrs:{id:"Messages"}},t._l(t.messages,function(e,a){return s("div",{key:a,staticClass:"message",class:{direct:e.direct,left:e.left,loading:e.loading,pop0:e.pop0,pop1:e.pop1,lost:e.lost},attrs:{id:e._id}},[s("div",{staticClass:"message-item"},[s("div",{staticClass:"message-body",domProps:{innerHTML:t._s(e.body)}}),t._v(" "),s("div",{staticClass:"message-loading"}),t._v(" "),s("div",{staticClass:"message-time"},[t._v("\n          "+t._s(e.timehm)+"\n          "),e.name?s("div",{staticClass:"message-username"},[t._v(t._s(e.name))]):t._e()])])])}))},staticRenderFns:[]};var P=s("VU/8")(j,N,!1,function(t){s("uK/s")},null,null).exports,R={name:"Boats",data:function(){return{t:u.t,boat:this.$store.state.game.boat(),boat10:this.boa(1,0),boat11:this.boa(1,1),boat12:this.boa(1,2),boat13:this.boa(1,3),boat20:this.boa(2,0),boat21:this.boa(2,1),boat22:this.boa(2,2),boat30:this.boa(3,0),boat31:this.boa(3,1),boat40:this.boa(4,0),boat1:this.group(1),boat2:this.group(2),boat3:this.group(3),boat4:this.group(4),disposition:this.$store.state.game.boat().ok}},computed:{version:function(){return this.$store.state.game.__v}},methods:{boa:function(t,e){return this.$store.state.game.boat().n[t][1]>e?"done":""},group:function(t){var e=this.$store.state.game.boat();return e.n[t][1]>e.n[t][0]?"wrong":""},autoDisposition:function(){this.$store.dispatch("autoDisposition")},finishDisposition:function(){this.$store.dispatch("finishDisposition")},clearDisposition:function(){this.$store.dispatch("clearDisposition")}},watch:{version:function(){this.boat10=this.boa(1,0),this.boat11=this.boa(1,1),this.boat12=this.boa(1,2),this.boat13=this.boa(1,3),this.boat20=this.boa(2,0),this.boat21=this.boa(2,1),this.boat22=this.boa(2,2),this.boat30=this.boa(3,0),this.boat31=this.boa(3,1),this.boat40=this.boa(4,0),this.boat1=this.group(1),this.boat2=this.group(2),this.boat3=this.group(3),this.boat4=this.group(4),this.disposition=this.$store.state.game.boat().ok}}},V={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Boats-init plr"},[s("div",{staticClass:"Boats-text"},[t._v("\n    "+t._s(t.t("Take a disposition."))+"\n    "),s("nobr",[s("router-link",{attrs:{to:"/rules/#ships"}},[t._v(t._s(t.t("Rules")))]),t._v(" "),s("button",{staticClass:"small grey",on:{click:t.autoDisposition}},[t._v("Auto")])],1)],1),t._v(" "),s("div",{staticClass:"Boats"},[s("div",{staticClass:"Boats-group",class:t.boat4},[s("div",{staticClass:"Boats-boat",class:t.boat40},[s("div",{staticClass:"Boats-boat__cell"}),s("div",{staticClass:"Boats-boat__cell"}),s("div",{staticClass:"Boats-boat__cell"}),s("div",{staticClass:"Boats-boat__cell"})])]),s("div",{staticClass:"Boats-group",class:t.boat3},[s("div",{staticClass:"Boats-boat",class:t.boat30},[s("div",{staticClass:"Boats-boat__cell"}),s("div",{staticClass:"Boats-boat__cell"}),s("div",{staticClass:"Boats-boat__cell"})]),s("div",{staticClass:"Boats-boat",class:t.boat31},[s("div",{staticClass:"Boats-boat__cell"}),s("div",{staticClass:"Boats-boat__cell"}),s("div",{staticClass:"Boats-boat__cell"})])]),s("div",{staticClass:"Boats-group",class:t.boat2},[s("div",{staticClass:"Boats-boat",class:t.boat20},[s("div",{staticClass:"Boats-boat__cell"}),s("div",{staticClass:"Boats-boat__cell"})]),s("div",{staticClass:"Boats-boat",class:t.boat21},[s("div",{staticClass:"Boats-boat__cell"}),s("div",{staticClass:"Boats-boat__cell"})]),s("div",{staticClass:"Boats-boat",class:t.boat22},[s("div",{staticClass:"Boats-boat__cell"}),s("div",{staticClass:"Boats-boat__cell"})])]),s("div",{staticClass:"Boats-group",class:t.boat1},[s("div",{staticClass:"Boats-boat",class:t.boat10},[s("div",{staticClass:"Boats-boat__cell"})]),s("div",{staticClass:"Boats-boat",class:t.boat11},[s("div",{staticClass:"Boats-boat__cell"})]),s("div",{staticClass:"Boats-boat",class:t.boat12},[s("div",{staticClass:"Boats-boat__cell"})]),s("div",{staticClass:"Boats-boat",class:t.boat13},[s("div",{staticClass:"Boats-boat__cell"})])])]),t._v(" "),s("transition",{attrs:{name:"show"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.disposition,expression:"disposition"}],staticClass:"Boats-text-finish"},[s("button",{staticClass:"small red",on:{click:t.finishDisposition}},[t._v(t._s(t.t("Ready?")))]),t._v("\n      ¬†\n      "),s("button",{staticClass:"small grey",on:{click:t.clearDisposition}},[t._v(t._s(t.t("Clear")))])])])],1)},staticRenderFns:[]};var S=s("VU/8")(R,V,!1,function(t){s("kOGW")},null,null).exports,O={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return"CellCol"===t.type?s("div",{staticClass:"Cell Board-row-a__cell",style:t.cellWidth},[t._v(t._s(t.content))]):"CellRow"===t.type?s("div",{staticClass:"Cell Board-row-1__cell",style:t.cellWidth},[t._v(t._s(t.content))]):"CellR"===t.type?s("div",{staticClass:"Cell Board__right-padding",style:t.cellWidth}):"Cell"===t.type?s("div",{staticClass:"Cell",class:t.boatClassProp,style:t.cellWidth,on:{click:t.cell}}):t._e()},staticRenderFns:[]};var U={name:"Board",data:function(){return{boardIndexes:this.$store.state.game.boardIndexes}},computed:{boardWidth:function(){return"max-width:"+this.$store.state.gameDisplay.boardWidth+"px"}},props:["player"],components:{Cell:s("VU/8")({name:"Cell",data:function(){return{boatClassProp:this.boatClass()}},computed:{cellWidth:function(){return"width:"+this.$store.state.gameDisplay.cellWidth+"px; height:"+this.$store.state.gameDisplay.cellWidth+"px;"},boatcounter:function(){return"Cell"===this.type&&this.$store.state.game.player(this.player).boat.c},disposition:function(){return"disposition"===this.$store.state.game.player().phase},ready:function(){return this.$store.state.game.phase("ready")},turn:function(){return this.$store.state.game.turn===this.$store.state.user._id},version:function(){return this.$store.state.game.__v}},props:["row","col","type","content","player"],methods:{boatClass:function(){if("Cell"!==this.type)return"";var t=this.$store.state.game.cell([this.row,this.col],this.player),e=t.class;if(this.disposition){var s=t.boat;if(!s)return e;if(s[0]>4)return"boat-wrong";var a=this.$store.state.game.boat(this.player).n[s[0]];if(a&&a[1]>a[0])return"boat-wrong"}else{var i=this.$store.state.lastCell;!this.disposition&&i&&3===i.length&&+i[0]==+this.player&&+i[1]==+this.row&&+i[2]==+this.col&&(e+=" last")}return e},cell:function(){0===this.player&&this.disposition?this.$store.dispatch("disposition",[+this.row,+this.col]):1===this.player&&this.ready&&this.turn&&this.$store.dispatch("move",[+this.row,+this.col])},watchVersion:function(){this.boatClassProp=this.boatClass()}},watch:{boatcounter:function(){this.boatClassProp=this.boatClass()},version:function(){this.watchVersion()}},created:function(){this.watchVersion()}},O,!1,function(t){s("fyY6")},null,null).exports}},A={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Board",class:"player"+t.player,style:t.boardWidth},[s("div",{staticClass:"Board-row Board-row-a"},[s("cell",{staticClass:"TurnIcon",attrs:{type:"CellRow"}}),t._l(t.boardIndexes.col,function(t){return s("cell",{key:t+0,attrs:{type:"CellCol",content:t}})}),s("cell",{attrs:{type:"CellR"}})],2),t._v(" "),t._l(t.boardIndexes.row,function(e,a){return s("div",{key:a,staticClass:"Board-row"},[s("cell",{attrs:{type:"CellRow",content:e}}),t._l(t.boardIndexes.col,function(i,n){return s("cell",{key:i+e,attrs:{type:"Cell",row:a,col:n,player:t.player}})}),s("cell",{attrs:{type:"CellR"}})],2)})],2)},staticRenderFns:[]},F={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Life"},[s("transition-group",{attrs:{name:"setLife"}},[t.boat41?s("div",{key:"boat41",staticClass:"Life-boat"},[s("div",{staticClass:"Life-boat__i"}),s("div",{staticClass:"Life-boat__i"}),s("div",{staticClass:"Life-boat__i"}),s("div",{staticClass:"Life-boat__i"})]):t._e(),t.boat31?s("div",{key:"boat31",staticClass:"Life-boat"},[s("div",{staticClass:"Life-boat__i"}),s("div",{staticClass:"Life-boat__i"}),s("div",{staticClass:"Life-boat__i"})]):t._e(),t.boat32?s("div",{key:"boat32",staticClass:"Life-boat"},[s("div",{staticClass:"Life-boat__i"}),s("div",{staticClass:"Life-boat__i"}),s("div",{staticClass:"Life-boat__i"})]):t._e(),t.boat21?s("div",{key:"boat21",staticClass:"Life-boat"},[s("div",{staticClass:"Life-boat__i"}),s("div",{staticClass:"Life-boat__i"})]):t._e(),t.boat22?s("div",{key:"boat22",staticClass:"Life-boat"},[s("div",{staticClass:"Life-boat__i"}),s("div",{staticClass:"Life-boat__i"})]):t._e(),t.boat23?s("div",{key:"boat23",staticClass:"Life-boat"},[s("div",{staticClass:"Life-boat__i"}),s("div",{staticClass:"Life-boat__i"})]):t._e(),t.boat11?s("div",{key:"boat11",staticClass:"Life-boat"},[s("div",{staticClass:"Life-boat__i"})]):t._e(),t.boat12?s("div",{key:"boat12",staticClass:"Life-boat"},[s("div",{staticClass:"Life-boat__i"})]):t._e(),t.boat13?s("div",{key:"boat13",staticClass:"Life-boat"},[s("div",{staticClass:"Life-boat__i"})]):t._e(),t.boat14?s("div",{key:"boat14",staticClass:"Life-boat"},[s("div",{staticClass:"Life-boat__i"})]):t._e(),t.boat41?t._e():s("div",{key:"boat41no",staticClass:"Life-boatdead"},[s("div",{staticClass:"Life-boat__i"}),s("div",{staticClass:"Life-boat__i"}),s("div",{staticClass:"Life-boat__i"}),s("div",{staticClass:"Life-boat__i"})]),t.boat31?t._e():s("div",{key:"boat31no",staticClass:"Life-boatdead"},[s("div",{staticClass:"Life-boat__i"}),s("div",{staticClass:"Life-boat__i"}),s("div",{staticClass:"Life-boat__i"})]),t.boat32?t._e():s("div",{key:"boat32no",staticClass:"Life-boatdead"},[s("div",{staticClass:"Life-boat__i"}),s("div",{staticClass:"Life-boat__i"}),s("div",{staticClass:"Life-boat__i"})]),t.boat21?t._e():s("div",{key:"boat21no",staticClass:"Life-boatdead"},[s("div",{staticClass:"Life-boat__i"}),s("div",{staticClass:"Life-boat__i"})]),t.boat22?t._e():s("div",{key:"boat22no",staticClass:"Life-boatdead"},[s("div",{staticClass:"Life-boat__i"}),s("div",{staticClass:"Life-boat__i"})]),t.boat23?t._e():s("div",{key:"boat23no",staticClass:"Life-boatdead"},[s("div",{staticClass:"Life-boat__i"}),s("div",{staticClass:"Life-boat__i"})]),t.boat11?t._e():s("div",{key:"boat11no",staticClass:"Life-boatdead"},[s("div",{staticClass:"Life-boat__i"})]),t.boat12?t._e():s("div",{key:"boat12no",staticClass:"Life-boatdead"},[s("div",{staticClass:"Life-boat__i"})]),t.boat13?t._e():s("div",{key:"boat13no",staticClass:"Life-boatdead"},[s("div",{staticClass:"Life-boat__i"})]),t.boat14?t._e():s("div",{key:"boat14no",staticClass:"Life-boatdead"},[s("div",{staticClass:"Life-boat__i"})])])],1)},staticRenderFns:[]};var H={name:"Basic",data:function(){return{players:!1,playername0:!1,playername1:!1,flickityOptions:{prevNextButtons:!1,pageDots:!1,dragThreshold:10,draggable:!1},linksecond:!1,endgame:!1,disposition0:!1,disposition1:!1,ready:!1}},props:["user0connect","user1connect"],computed:{boardWidth:function(){return"width:"+this.$store.state.gameDisplay.boardWidth+"px; height:"+this.$store.state.gameDisplay.boardWidth+"px;"},land:function(){return this.$store.state.gameDisplay.land},version:function(){return this.$store.state.game.__v},turnClass:function(){var t="";return this.ready&&(this.turn(0)?t="p0":this.turn(1)&&(t="p1")),t}},methods:{newGame:function(){this.switchBoard(0),this.$store.dispatch("newGame",this.endgame)},lifeClass:function(t){var e="";return this.$store.state.game.player(t).boat.c<40&&(e="critical"),e},turn:function(t){return this.$store.state.game.turn===this.$store.state.game["playerId"+t]},currentBoard:function(t){return this.$store.state.currentBoard===t},switchBoard:function(t){this.disposition0?t?this.$router.push("/game"):this.$router.push("/user"):this.$refs.flickity.select(t)},selectBoard:function(){var t=this;this.$refs.flickity.on("select",function(){t.$store.commit("setBoard",this.selectedIndex)})},watchPhase:function(){(this.disposition0="disposition"===this.$store.state.game.player().phase,this.disposition1="disposition"===this.$store.state.game.player(1).phase,this.ready=this.$store.state.game.phase("ready"),2!==this.land)&&(this.disposition0||("undefined"!==M()(this.$refs.flickity)&&(this.$refs.flickity.destroy(),this.flickityOptions.draggable=!0,this.$refs.flickity.init()),this.selectBoard()));this.linksecond=!this.$store.state.game.playerId1},watchLand:function(t){var e=M()(this.$refs.flickity);2===t&&"undefined"!==e?this.$refs.flickity.destroy():2!==t&&"undefined"===e&&this.watchPhase()},watchVersion:function(){var t=this;this.disposition0="disposition"===this.$store.state.game.player().phase,this.disposition1="disposition"===this.$store.state.game.player(1).phase,this.ready=this.$store.state.game.phase("ready"),this.playername0=this.$store.state.game.user0.name,this.playername1=this.$store.state.game.user1.name,this.players=this.$store.state.game.playersIDs;var e=this.$store.state.currentBoard,s=1-this.$store.state.currentBoard;this.ready&&this.turn(e)&&setTimeout(function(){t.switchBoard(s)},500),this.linksecond=!this.$store.state.game.playerId1,this.endgame=this.$store.state.game.newgame}},mounted:function(){this.$nextTick(function(){this.watchPhase()})},created:function(){this.watchVersion()},watch:{land:function(t){this.watchLand(t)},disposition0:function(){this.watchPhase()},version:function(){this.watchVersion()}},components:{Texts:D,Messages:P,Boats:S,Board:s("VU/8")(U,A,!1,null,null,null).exports,Flickity:c,Life:s("VU/8")({name:"Life",props:["player"],data:function(){return{boat41:"",boat31:"",boat32:"",boat21:"",boat22:"",boat23:"",boat11:"",boat12:"",boat13:"",boat14:""}},computed:{version:function(){return this.$store.state.game.__v}},methods:{watchVersion:function(){this.boa=this.$store.state.game.boat(this.player).n,this.boat41=this.boa[4][1]<1,this.boat31=this.boa[3][1]<1,this.boat32=this.boa[3][1]<2,this.boat21=this.boa[2][1]<1,this.boat22=this.boa[2][1]<2,this.boat23=this.boa[2][1]<3,this.boat11=this.boa[1][1]<1,this.boat12=this.boa[1][1]<2,this.boat13=this.boa[1][1]<3,this.boat14=this.boa[1][1]<4}},watch:{version:function(){this.watchVersion()}},created:function(){this.watchVersion()}},F,!1,function(t){s("Ba12")},null,null).exports}},W={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav",{staticClass:"nav-boarduser"},[s("transition-group",[s("div",{key:"0",staticClass:"nav-boarduser__butto p0",class:{active:t.currentBoard(0),disposition:t.disposition0,lost:!t.user0connect}},[s("div",{staticClass:"nav-boarduser__button",on:{click:function(e){t.switchBoard(0)}}},[t._v(t._s(t.playername0))]),t._v(" "),s("div",{staticClass:"nav-boarduser__life",class:t.lifeClass(0)},[s("transition",{attrs:{name:"show"}},[t.disposition0?t._e():s("Life",{attrs:{player:0}})],1)],1)]),s("div",{key:"2",staticClass:"nav-boarduser__vs",class:t.turnClass},[t._v("vs\n      ")]),s("div",{key:"1",staticClass:"nav-boarduser__butto p1",class:{active:t.currentBoard(1),disposition:t.disposition1,lost:!t.user1connect}},[s("div",{staticClass:"nav-boarduser__button",on:{click:function(e){t.switchBoard(1)}}},[t._v(t._s(t.playername1))]),t._v(" "),s("div",{staticClass:"nav-boarduser__life",class:t.lifeClass(1)},[s("transition",{attrs:{name:"show"}},[t.disposition1?t._e():s("Life",{attrs:{player:1}})],1)],1)])])],1),t._v(" "),s("texts"),t._v(" "),s("transition",{attrs:{name:"show"}},[t.disposition0?s("boats"):t._e()],1),t._v(" "),s("transition",{attrs:{name:"show"}},[t.endgame?s("div",{staticClass:"new-game"},[s("button",{staticClass:"small red",on:{click:t.newGame}},[t._v("New game?")])]):t._e()]),t._v(" "),s("flickity",{ref:"flickity",staticClass:"boarduser-boards",class:{disposition:t.disposition0},style:t.boardWidth,attrs:{id:"Boards",options:t.flickityOptions}},t._l(t.players,function(t,e){return s("board",{key:e,attrs:{player:e}})})),t._v(" "),s("messages")],1)},staticRenderFns:[]};var q=s("VU/8")(H,W,!1,function(t){s("vmKa")},null,null).exports,z=s("sUu7"),J=s("yXtV"),Q=s.n(J),Y={};a.a.use(Q.a,{namespace:"vue__"});var Z=a.a.ls.get("lang")||"en";"en"!==Z&&(Y.locale=Z,s("Nopy")("./"+Z).then(function(t){z.a.localize(Z,t)})),a.a.use(z.b,Y);var K={name:"User",data:function(){return{t:u.t,name:this.$store.state.user.name,email:this.$store.state.user.email,password:"",secret:"",clas:{name:"",email:"",signin:"",secret:""},userPhase:"new"}},computed:{version:function(){return this.$store.state.user.__v},phase:function(){return this.$store.state.user.phase}},methods:{playAsGuest:function(){this.$store.dispatch("createUser"),this.$store.dispatch("changePlayer"),this.$router.push("/")},formHandle:function(t){var e=this;this.$validator.validateAll().then(function(s){if(s)if("signin"===t)e.clas[t]="loading",e.$store.dispatch("signIn",{email:e.email,password:e.password}).then(function(){e.clas.signin=""});else if("secret"===t)e.clas[t]="loading",e.$store.dispatch("verifyEmail",e.secret).then(function(){e.clas.secret="",e.secret=""});else{var a=e[t].trim();a!==e.$store.state.user[t]&&"change"===e.clas[t]&&e.$store.dispatch("changePlayerInfo",{field:t,val:a}).then(function(){e[t]=a,e.clas[t]=""})}})},keyupHandle:function(t){var e=this,s=this[t].trim();s&&s!==this.$store.state.user[t]?(this.clas[t]="check",this.$store.dispatch("checkValidInfo",{field:t,val:s}).then(function(s){e.clas[t]="change"}).catch(function(s){e.clas[t]=s.response.data})):this.clas[t]=""},phaseHandle:function(t){this.userPhase=t,this.$store.dispatch("setUserPhase",t)},watchVersion:function(){this.clas.name="",this.clas.email="",this.clas.signin="",this.clas.secret="",this.name=this.$store.state.user.name,this.email=this.$store.state.user.email,this.email||(this.password="")},watchPhase:function(){this.userPhase=this.$store.state.user.phase,"emailVerified"===this.userPhase&&this.password&&this.formHandle("signin")}},created:function(){this.watchPhase()},mounted:function(){this.$nextTick(function(){var t=this.$route.params.userId,e=this.$route.params.code;e&&t&&(t!==this.$store.state.user._id&&(this.$store.state.user._id=t),this.$store.dispatch("setUserPhase","secret"),this.secret=e,this.formHandle("secret"))})},watch:{version:function(){this.watchVersion()},phase:function(){this.watchPhase()}},components:{Texts:D}},X={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"form User-form plr"},[s("transition",{attrs:{name:"show",mode:"out-in"}},["new"===t.userPhase||"emailVerified"===t.userPhase?s("div",{key:"new"},[s("div",{staticClass:"form-row"},[s("label",{attrs:{for:"name"}},[t._v(t._s(t.t("Name")))]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text",id:"name",disabled:""},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-row"},[s("a",{staticClass:"button grey",on:{click:t.playAsGuest}},[t._v(t._s(t.t("Change random name")))])]),t._v(" "),s("p",{staticClass:"User-form-center"},[t._v("\n          "+t._s(t.t("or sign in:"))+"\n        ")]),t._v(" "),s("texts"),t._v(" "),s("form",{staticClass:"form form-signin",on:{submit:function(e){e.preventDefault(),t.formHandle("signin")}}},[s("div",{staticClass:"form-row"},[s("label",{attrs:{for:"email"}},[t._v(t._s(t.t("Email")))]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],attrs:{type:"email",id:"email",name:"email",disabled:"loading"===t.clas.signin,"data-vv-as":t.t("Email")},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),s("transition",{attrs:{name:"show"}},[t.errors.has("email")?s("div",{staticClass:"form-error"},[t._v(t._s(t.errors.first("email")))]):t._e()])],1),t._v(" "),s("div",{staticClass:"form-row"},[s("label",{attrs:{for:"password"}},[t._v(t._s(t.t("Password")))]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{type:"password",id:"password",name:"password",disabled:"loading"===t.clas.signin,"data-vv-as":t.t("Password")},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),s("transition",{attrs:{name:"show"}},[t.errors.has("password")?s("div",{staticClass:"form-error"},[t._v(t._s(t.errors.first("password")))]):t._e()])],1),t._v(" "),s("div",{staticClass:"form-row buttons",class:t.clas.signin},[s("button",{attrs:{type:"submit",disabled:"loading"===t.clas.signin}},[t._v(t._s(t.t("Sign in")))])])]),t._v(" "),s("p",{staticClass:"User-form-center",domProps:{innerHTML:t._s(t.t("signedAdvantages"))}})],1):t._e(),t._v(" "),"secret"===t.userPhase?s("div",{key:"secret"},[s("p",[t._v("\n          "+t._s(t.t("The secret code was send on email"))+" "+t._s(t.email)+".\n        ")]),t._v(" "),s("texts"),t._v(" "),s("form",{staticClass:"form form-secret",attrs:{disabled:"loading"===t.clas.secret},on:{submit:function(e){e.preventDefault(),t.formHandle("secret")}}},[s("div",{staticClass:"form-row",class:t.clas.secret},[s("label",{attrs:{for:"secret"}},[t._v(t._s(t.t("Secret code")))]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.secret,expression:"secret"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{type:"text",id:"secret",name:"secret",disabled:"loading"===t.clas.secret,"data-vv-as":t.t("Secret code")},domProps:{value:t.secret},on:{input:function(e){e.target.composing||(t.secret=e.target.value)}}}),t._v(" "),s("transition",{attrs:{name:"show"}},[t.errors.has("secret")?s("div",{staticClass:"form-error"},[t._v(t._s(t.errors.first("secret")))]):t._e()])],1),t._v(" "),s("div",{staticClass:"form-row"},[s("button",{attrs:{type:"submit"}},[t._v(t._s(t.t("Confirm")))])])]),t._v(" "),s("div",{staticClass:"form-row buttons"},[s("a",{staticClass:"button grey",on:{click:function(e){t.phaseHandle("new")}}},[t._v(t._s(t.t("I didn`t get it")))])])],1):t._e(),t._v(" "),"signed"===t.userPhase?s("div",{key:"signed"},[s("p",[t._v("\n          "+t._s(t.t("Signed in."))+"\n        ")]),t._v(" "),s("texts"),t._v(" "),s("form",{staticClass:"form",class:t.clas.name,attrs:{disabled:"change"!==t.clas.name},on:{submit:function(e){e.preventDefault(),t.formHandle("name")}}},[s("div",{staticClass:"form-row",class:t.clas.name},[s("label",{attrs:{for:"name"}},[t._v("\n              "+t._s(t.t("Name"))+"\n              "),s("transition",{attrs:{name:"show-del1"}},["busy"===t.clas.name?s("div",{staticClass:"label-check"},[t._v(t._s(t.t("Busy")))]):t._e()])],1),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text",id:"name",disabled:"loading"===t.clas.name},domProps:{value:t.name},on:{keyup:function(e){t.keyupHandle("name")},input:function(e){e.target.composing||(t.name=e.target.value)}}})]),t._v(" "),s("transition",{attrs:{name:"show-del1"}},["change"===t.clas.name?s("div",{staticClass:"form-row"},[s("button",{attrs:{type:"submit"}},[t._v(t._s(t.t("Change name")))])]):t._e()])],1),t._v(" "),s("form",{staticClass:"form",class:t.clas.email,attrs:{disabled:"change"!==t.clas.email},on:{submit:function(e){e.preventDefault(),t.formHandle("email")}}},[s("div",{staticClass:"form-row",class:t.clas.email},[s("label",{attrs:{for:"email"}},[t._v("\n              "+t._s(t.t("Email"))+"\n              "),s("transition",{attrs:{name:"show-del1"}},["busy"===t.clas.email?s("div",{staticClass:"label-check"},[t._v(t._s(t.t("Busy")))]):t._e()])],1),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"email",id:"email",disabled:"loading"===t.clas.email},domProps:{value:t.email},on:{keyup:function(e){t.keyupHandle("email")},input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),s("transition",{attrs:{name:"show-del1"}},["change"===t.clas.email?s("div",{staticClass:"form-row"},[s("button",{attrs:{type:"submit"}},[t._v(t._s(t.t("Change email")))])]):t._e()])],1),t._v(" "),s("div",{staticClass:"form-row buttons"},[s("a",{staticClass:"button grey",on:{click:function(e){t.phaseHandle("new")}}},[t._v(t._s(t.t("Sign Out")))])])],1):t._e()])],1)])},staticRenderFns:[]};var tt=s("VU/8")(K,X,!1,function(t){s("uqRF")},"data-v-bccfcdb6",null).exports,et={name:"Game",data:function(){return{t:u.t,gameLinkCopied:!1,waitRedirect:!1,gameFight:""}},computed:{gameLink:function(){return this.$store.state.game.link()},version:function(){return this.$store.state.game.__v}},methods:{handleCopy:function(t){this.gameLinkCopied=!0},handleNew:function(){this.gameLinkCopied=!1,this.$store.dispatch("newGame")},watchVersion:function(){var t=this;if(this.$store.state.redirect)this.gameFight=Object(u.t)("üì° Connecting..."),this.$store.state.game.playerId1&&(this.gameFight=Object(u.t)("üîó Joined!"),this.$store.commit("setRedirect",!1),setTimeout(function(){t.$router.push("/")},3e3));else{var e=this.$route.params.joinGameId;e&&(this.$store.commit("setRedirect",!0),this.$store.dispatch("newGame",e))}}},created:function(){this.watchVersion()},watch:{version:function(){this.watchVersion()}}},st={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"form Game-form plr"},[s("transition-group",{attrs:{name:"show"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.gameFight,expression:"gameFight"}],key:"joined1",staticClass:"Game-joined"},[s("p",[s("b",[t._v(t._s(t.gameFight))])])]),t._v(" "),t.gameLinkCopied?s("div",{key:"copy1",staticClass:"Game-link-copied"},[s("p",{domProps:{innerHTML:t._s(t.t("The link is copied."))}})]):s("div",{key:"copy0",staticClass:"Game-link"},[s("p",{domProps:{innerHTML:t._s(t.t("Send this link ..."))}}),t._v(" "),s("div",{staticClass:"form-row"},[s("label",{attrs:{for:"gameLink"}},[t._v(t._s(t.t("Link")))]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.gameLink,expression:"gameLink"}],attrs:{type:"text",id:"gameLink"},domProps:{value:t.gameLink},on:{input:function(e){e.target.composing||(t.gameLink=e.target.value)}}})]),t._v(" "),s("a",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.gameLink,expression:"gameLink",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.handleCopy,expression:"handleCopy",arg:"success"}],staticClass:"button"},[t._v(t._s(t.t("Copy link")))])])]),t._v(" "),s("div",{staticClass:"Game-new"},[s("a",{staticClass:"button grey",on:{click:t.handleNew}},[t._v(t._s(t.t("New game")))])])],1)])},staticRenderFns:[]};var at=s("VU/8")(et,st,!1,function(t){s("yYtQ")},null,null).exports,it={name:"Rules",data:function(){return{t:u.t}}},nt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"Rules plr"},[s("h2",[t._v(t._s(t.t("Battleship")))]),t._v(" "),s("div",{domProps:{innerHTML:t._s(t.t("Rules01"))}}),t._v(" "),s("h2",{attrs:{id:"ships"}},[t._v(t._s(t.t("Ships")))]),t._v(" "),s("table",[s("tr",[s("th",[t._v("\n          "+t._s(t.t("Type of ship"))+"\n        ")]),t._v(" "),s("th",[t._v("\n          "+t._s(t.t("Quantity"))+"\n        ")])]),t._v(" "),s("tr",[s("td",[t._v("\n          "+t._s(t.t("Battleship (four-decker)"))+"\n        ")]),t._v(" "),s("td",{staticClass:"center"},[t._v("\n          1\n        ")])]),t._v(" "),s("tr",[s("td",[t._v("\n          "+t._s(t.t("Cruiser (three-decker)"))+"\n        ")]),t._v(" "),s("td",{staticClass:"center"},[t._v("\n          2\n        ")])]),t._v(" "),s("tr",[s("td",[t._v("\n          "+t._s(t.t("Destroyer (two-decker)"))+"\n        ")]),t._v(" "),s("td",{staticClass:"center"},[t._v("\n          3\n        ")])]),t._v(" "),s("tr",[s("td",[t._v("\n          "+t._s(t.t("Submarine (single-decker)"))+"\n        ")]),t._v(" "),s("td",{staticClass:"center"},[t._v("\n          4\n        ")])])])])])},staticRenderFns:[]};var ot=s("VU/8")(it,nt,!1,function(t){s("l2lM")},null,null).exports,rt={name:"About",data:function(){return{t:u.t}}},ct={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"About plr"},[s("p",{domProps:{innerHTML:t._s(t.t("DeveloperInfo"))}}),t._v(" "),s("p",[s("b",[t._v(t._s(t.t("Frontend:")))]),t._v(" "),s("br"),t._v("\n      Vue,\n      Vuex,\n      Socket.io,\n      Webpack\n      "),s("br"),t._v("\n      Clone,\n      Es6-promise,\n      Eslint,\n      Push.js,\n      Shortid,\n      Vue-flickity,\n      Vue-ls,\n      Vue-pull-refresh,\n      Vue-router\n    ")]),t._v(" "),s("p",[s("b",[t._v(t._s(t.t("Backend:")))]),t._v(" "),s("br"),t._v("\n      Heroku.com,\n      Mlab.com,\n      Express,\n      Mongoose\n      "),s("br"),t._v("\n      Cors,\n      Socket.io\n    ")])])])},staticRenderFns:[]};var lt=s("VU/8")(rt,ct,!1,function(t){s("KvgI")},null,null).exports,dt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"Console plr"},[e("pre",[this._v(this._s(this.console))])])])},staticRenderFns:[]};var ut=s("VU/8")({name:"Console",data:function(){return{}},computed:{console:function(){return this.$store.state.console}}},dt,!1,function(t){s("t6BR")},"data-v-3c73474c",null).exports,ht=s("RZCy"),mt=s.n(ht);a.a.use(L.a),a.a.use(mt.a);var pt=new L.a({mode:"hash",routes:[{path:"/",meta:{title:"Basic"},component:q},{path:"/user",meta:{title:"Captain"},component:tt},{path:"/verify/:userId/:code",meta:{title:"Captain"},component:tt},{path:"/g/:joinGameId",meta:{title:"Join Game"},component:at},{path:"/game",meta:{title:"Game"},component:at},{path:"/rules",meta:{title:"Rules"},component:ot},{path:"/about",meta:{title:"About"},component:lt},{path:"/console",meta:{title:"Console"},component:ut}]}),vt=s("fZjL"),ft=s.n(vt),_t=s("NYxO"),bt=s("wvfG"),gt=s.n(bt),yt=s("Q+y4"),kt=s.n(yt),Ct=s("mtWM"),wt=s.n(Ct),Bt=s("DmT9"),xt=s.n(Bt),$t=s("Zrlr"),Lt=s.n($t),It=s("wxAW"),Mt=s.n(It),Et=s("Z8es"),Dt=s.n(Et),Tt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Lt()(this,t),!e)return this.name="Anon",this._id=0,void(this.connect=!1);this.name=t._generateName(),this._id=Dt.a.generate(),this.phase="new",this.lang="en",this.tokens=null,this.app="0.9.1",this.__v=0}return Mt()(t,null,[{key:"_generateName",value:function(){var e=Math.floor(Math.random()*t.prototype.captainNames.length),s=t.prototype.captainNames[e];return t.prototype.captainNames.splice(e,1),s}},{key:"isValid",value:function(t){if(!(t&&t._id&&t.name&&t.phase&&t.app))return!1;var e=t.app.split("."),s="0.9.0".split(".");if(e.length!==s.length)return!1;for(var a=0;a<e.length;a++)if(e[a]<s[a])return!1;return!0}}]),t}(),Gt=Tt;Tt.prototype.captainNames=["Hector Barbossa","Jack Sparrow","Davy Jones","Calipso","Bootscrap Bill","Blackbeard","Alexander Smollett","Ben Gunn","Billy Bones","Jim Hawkins","John Silver","John Trelawney","David Livesey","Captain Flint"];var jt=s("ifoU"),Nt=s.n(jt),Pt=s("bOdI"),Rt=s.n(Pt),Vt=s("jNuQ"),St=s.n(Vt),Ot=function(){function t(){var e,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(Lt()(this,t),i)?(this._id=i._id,this.players=St()(i.players),this.playersIDs=i.playersIDs.slice(),this.turn=i.turn,this.__v=i.__v,this.newgame=i.newgame):(this._id=Dt.a.generate(),this.players=(e={},Rt()(e,s._id,this._playerNew(s)),Rt()(e,a._id,this._playerNew(a)),e),this.playersIDs=[s._id,a._id],this.turn=a._id,this.__v=0,this.newgame=null)}return Mt()(t,[{key:"link",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t=t||this._id,location.origin+"/#/g/"+t}},{key:"_setUser",value:function(t,e){e.connect||(e.connect=!0);var s=this.playersIDs[t];this.players[e._id]=St()(this.player(t)),this.players[e._id].user={name:e.name,connect:e.connect},delete this.players[s],this.playersIDs[t]=e._id,this.turn===s&&(this.turn=e._id)}},{key:"playerInvertId",value:function(t){return this.playersIDs[1-this.playersIDs.indexOf(t)]}},{key:"player",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.playersIDs[+t];return this.players[e]}},{key:"boat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.player(t).boat}},{key:"board",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.player(t).board}},{key:"cell",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.board(e)[t[0]][t[1]]}},{key:"phase",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t?this.player().phase===t&&this.player(1).phase===t:this.player().phase===this.player(1).phase&&this.player().phase}},{key:"_playerNew",value:function(e){return{user:{name:e.name},board:t._boardNew(),boat:St()(this.boatInit),phase:"disposition"}}},{key:"_getBoat",value:function(t){for(var e=[],s=this.boat()[t[0]][t[1]],a=s.vector-1,i=0;i<s.size;i++){var n=s.index.slice();n[a]+=i,e.push(n)}return e}},{key:"_joinBoats",value:function(e,s){var a=this,i=this.boat(),n=i[e[0]][e[1]],o=i[s[0]][s[1]],r={index:t._minIndex(n.index,o.index),vector:t._calcVector(n.index,o.index),size:n.size+o.size},c=[r.size,t._i10(r.index)];return i[c[0]]||(i[c[0]]={}),i[c[0]][c[1]]=r,delete i[e[0]][e[1]],delete i[s[0]][s[1]],this._getBoat(c).map(function(t){a.cell(t).boat=c}),r}},{key:"_disjoinBoats",value:function(e){var s=this,a=this.boat(),i=this.cell(e),n=[{},{}],o=0;this._getBoat(i.boat).map(function(s){t._i10(s)===t._i10(e)?o++:n[o].index?n[o].size++:n[o]={index:s,size:1,vector:a[i.boat[0]][i.boat[1]].vector}}),n.map(function(e){if(e.index){var i=[e.size,t._i10(e.index)];a[i[0]][i[1]]=e,s._getBoat(i).map(function(t){s.cell(t).boat=i})}})}},{key:"_countBoats",value:function(){var t=this.boat();t.c++;for(var e=!0,s=1;s<5;s++)t.n[s][1]=ft()(t[s]).length,t.n[s][0]!==t.n[s][1]&&(e=!1);t.ok=e}},{key:"_setBoat",value:function(e){var s=this,a=this.cell(e),i=t._i10(e);a.class="boat";var n=[];t._blocks(e,"plus").map(function(t){var e=s.cell(t);"boat"===e.class&&n.push(e.boat)});var o={index:e,vector:0,size:1};this.boat()[1][i]=o,a.boat=[1,i],n.length&&n.map(function(e){o=s._joinBoats(e,[o.size,t._i10(o.index)])}),this._countBoats()}},{key:"_delBoat",value:function(t){var e=this.boat(),s=this.cell(t);delete s.class;var a=[s.boat[0],s.boat[1]];e[a[0]][a[1]].size>1&&this._disjoinBoats(t),delete e[a[0]][a[1]],s.boat=[],this._countBoats()}},{key:"_setBlock",value:function(e){var s=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",i=t._blocks(e,a),n=t._i10(e);i.map(function(t){var e=s.cell(t);e.class||(e.class="disable"),e.block&&e.block.push||(e.block=[]),e.block.indexOf(n)<0&&e.block.push(n)})}},{key:"_delBlock",value:function(e){var s=this,a=t._blocks(e,"o"),i=t._i10(e);a.map(function(t){var e=s.cell(t);if("disable"===e.class){var a=e.block.indexOf(i);~a&&(e.block.splice(a,1),e.block.length||delete e.class)}})}},{key:"_checkNone",value:function(t,e,s){for(var a=!0,i=0;i<e;i++){var n=[t[0],t[1]];n[s]+=i,this.cell(n).class&&(a=!1)}return a}},{key:"_randomBoat",value:function(e){var s=this,a=t.prototype.boardIndexes.row.length-e,i=[],n=[],o=!1;this.board().map(function(t,i){t.map(function(t,r){if(!t.class&&(i<=a||r<=a)){var c=!0;i>a&&r<=a?(o=1,c=s._checkNone([i,r],e,o)):r>a&&i<=a?(o=0,c=s._checkNone([i,r],e,o)):(o=Math.floor(2*Math.random()),(c=s._checkNone([i,r],e,o))||(o=1-o,c=s._checkNone([i,r],e,o))),c&&n.push([i,r,o])}})});for(var r=Math.floor(Math.random()*n.length),c=0;c<e;c++){var l=[n[r][0],n[r][1]];l[n[r][2]]+=c,i.push(l)}return i}},{key:"autoDisposition",value:function(){var e=this,s=this.boat();s[1]={},s[2]={},s[3]={},s[4]={},this.player().board=t._boardNew(),ft()(s.n).reverse().map(function(t){for(var a=0;a<s.n[t][0];a++){e._randomBoat(t).map(function(t){e.setCell(t),e._setBlock(t,"o")})}})}},{key:"finishDisposition",value:function(){this.board().map(function(t){t.map(function(t){t.block=[],"disable"===t.class&&delete t.class})}),this.player().phase="ready",this.boat().n=St()(this.boatInit.n),this.boat().c=100,this.boat().ok=St()(this.boatInit.ok)}},{key:"clearDisposition",value:function(){this.player().board=t._boardNew(),this.player().boat=St()(this.boatInit)}},{key:"disposition",value:function(t){var e=this.cell(t).class;e?"boat"===e&&this.delCell(t):this.setCell(t)}},{key:"setCell",value:function(t){this._setBoat(t),this._setBlock(t)}},{key:"delCell",value:function(t){this._delBoat(t),this._delBlock(t)}},{key:"playerId0",get:function(){return this.playersIDs[0]},set:function(t){this.playersIDs[0]=t}},{key:"playerId1",get:function(){return this.playersIDs[1]},set:function(t){this.playersIDs[1]=t}},{key:"user0",get:function(){return{_id:this.playerId0,name:this.player().user.name}},set:function(t){this._setUser(0,t)}},{key:"user1",get:function(){return{_id:this.playerId1,name:this.player(1).user.name,connect:this.player(1).user.connect}},set:function(t){this._setUser(1,t)}}],[{key:"isValid",value:function(t,e){return!!(t&&t._id&&t.players&&t.players[e._id])}},{key:"userInvertId",value:function(t,e){var s=t.indexOf(e);return~s?(t.splice(s,1),t.pop()):0}},{key:"_boardNew",value:function(){return t.prototype.boardIndexes.row.map(function(){return t.prototype.boardIndexes.col.map(function(){return{}})})}},{key:"_i10",value:function(t){return t[0]+""+t[1]}},{key:"_minIndex",value:function(t,e){return t[0]>e[0]||t[1]>e[1]?e:t}},{key:"_calcVector",value:function(t,e){return t[0]!==e[0]?1:2}},{key:"_blocks",value:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",a=[],i=0===e[0]?0:-1,n=e[0]===t.prototype.boardIndexes.row.length-1?0:1,o=0===e[1]?0:-1,r=e[1]===t.prototype.boardIndexes.col.length-1?0:1;if(t.prototype._blockTemplates.has(s))for(var c=i;c<=n;c++)for(var l=o;l<=r;l++)0===c&&0===l||~t.prototype._blockTemplates.get(s).indexOf(""+c+l)&&a.push([e[0]+c,e[1]+l]);return a}}]),t}();Ot.prototype.boardIndexes={row:[1,2,3,4,5,6,7,8,9,10],col:["a","b","c","d","e","f","g","h","i","j"]},Ot.prototype.boatInit={1:{},2:{},3:{},4:{},n:{1:[4,0],2:[3,0],3:[2,0],4:[1,0]},c:0,ok:!1},Ot.prototype._blockTemplates=new Nt.a([["x",["-1-1","-11","1-1","11"]],["o",["-1-1","-10","-11","0-1","01","1-1","10","11"]],["plus",["-10","0-1","01","10"]]]),Ot.prototype.display={width:0,height:0,cellWidth:0,boardWidth:500,boardMaxWidth:500,mainHeight:0,land:0,timer:null};var Ut=Ot,At=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments[1];Lt()(this,t),this._id=e._id||Dt.a.generate(),this.time=e.time||Date.now(),this.userid=void 0!==e.userid?e.userid:"system",this.direct=e.direct||!1,this.loading=e.loading||null,this.type=e.type||"",this.body=e.body||"",this.pop0=e.pop0||!0,this.pop1=e.pop1||!1,this.userid!==s.user0._id&&"system"!==this.userid&&(this.left=!0);var a=new Date(this.time);if(a.hours=a.getHours(),a.minutes=a.getMinutes(),a.hours<10&&(a.hours="0"+a.hours),a.minutes<10&&(a.minutes="0"+a.minutes),this.timehm=a.hours+":"+a.minutes,"system"!==this.userid){var i=s.players[this.userid];i&&(this.name=i.user.name)}s.newgame&&this.type&&"challenge"===this.type&&(this.body+=' <a href="'+s.link(s.newgame)+'" class="button button-small-red">'+Object(u.t)("Accept")+"</a>"),this.direct&&void 0===e.loading&&(this.loading=!0)},Ft=s("hKoQ");Object(Ft.polyfill)(),a.a.use(_t.a),a.a.use(Q.a,{namespace:"vue__"}),a.a.use(gt.a);var Ht=a.a.ls.get("user"),Wt=a.a.ls.get("game"),qt=a.a.ls.get("lang")||"en",zt=a.a.ls.get("messages")||{c:0};h.a.add("en",s("EYIR")).add("ru",s("Bkrn")).setLocale(qt),xt.a.queue=[];var Jt=new _t.a.Store({state:{io:xt.a.connect("https://desolate-lake-69712.herokuapp.com"),user:Ht,game:Wt,messages:zt,lang:qt,gameDisplay:0,currentBoard:0,lastCell:"",barMenuOpened:0,text:"",tab:1,redirect:0,console:""},mutations:{set:function(t,e){var s=e.type,a=e.items;t[s]=a},lsUser:function(){a.a.ls.set("user",Ht)},lsGame:function(){a.a.ls.set("game",Wt)},lsMessages:function(){a.a.ls.set("messages",zt)},setLastCell:function(t,e){t.lastCell=e},setText:function(t,e){t.text=e},setMessage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=new At(e,Wt);for(var a in t.messages)delete t.messages[a].pop0,delete t.messages[a].pop1;t.messages[s._id]=s,t.messages.c=ft()(t.messages).length,this.commit("lsMessages")},clearMessages:function(t){t.messages=zt={c:0},this.commit("lsMessages")},setBarMenuOpen:function(t,e){t.barMenuOpened="toggle"!==e?e:!t.barMenuOpened},setTab:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.tab=e},setBoard:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t.currentBoard=+e},setRedirect:function(t,e){t.redirect=e},setGameDisplay:function(t){var e=t.gameDisplay=Wt.display;e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight,e.land=e.width>e.height?1:0,e.boardWidth=e.land?e.height:e.width,e.boardWidth>e.boardMaxWidth&&(e.boardWidth=e.boardMaxWidth),e.cellWidth=e.boardWidth/(Wt.boardIndexes.row.length+1),e.width>2*e.boardWidth+20&&(e.land=2),e.mainHeight=e.height;var s=document.getElementById("Bar");s&&(e.mainHeight-=s.offsetHeight),e.timer&&clearTimeout(e.timer),e.timer=setTimeout(function(){var t=document.getElementById("Send");t&&(e.mainHeight-=t.offsetHeight)},1e3)},gameLog:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t.console=e+"\r\n"+t.console},switchLang:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&e===t.lang||(e||(e="en"===t.lang?"ru":"en"),t.lang=Ht.lang=e,a.a.ls.set("lang",e),this.dispatch("changePlayerInfo",{field:"lang",val:e}),window.location.reload(!0))},setSocket:function(t){var e=this;t.io.on("authenticated",function(){console.log("Socket authenticated."),e.commit("gameLog","Socket authenticated."),e.dispatch("getUser")}).on("unauthorized",function(t){"jwt expired"===t.data.message&&e.dispatch("refreshToken")}).on("connect",function(){Wt.__v--,e.commit("gameLog","Socket connected.");var t=G()(zt).pop();t&&t.type&&"error"===t.type&&e.commit("setMessage",{body:Object(u.t)("üëå Socket connected.")}),e.commit("authSocket"),xt.a.queue.length?e.dispatch("setIoQueue"):e.dispatch("getGame")}).on("connect_error",function(){Wt.__v--,e.commit("gameLog","Socket error.");var t=G()(zt).pop();t&&t.type&&"error"===t.type||e.commit("setMessage",{type:"error",body:Object(u.t)("üëé Socket error.")})}).on("MESSAGE",function(t){e.commit("gameLog",String(t))}).on("USER_REGISTERED",function(t){t!==Ht._id&&(Wt.player(1).user.connect=!0,Wt.__v--,e.commit("gameLog","User1 online"))}).on("USER_DISCONNECTED",function(){Wt.player(1).user.connect=!1,Wt.__v--,e.commit("gameLog","User1 offline")}).on("USER_READY",function(t){t._id!==Ht._id&&(Wt.player(1).phase="ready",Wt.boat(1).c=100,Wt.__v--,e.commit("lsGame")),e.commit("gameLog",t.name+" ready."),e.commit("setMessage",{userid:t._id,body:Object(u.t)("üç∏ Ready.")}),Wt.phase("ready")&&e.commit("setMessage",{userid:Wt.playerId1,body:Object(u.t)("üí™ Let the fight begin!")})}).on("USER_CHANGED",function(t){var s=Wt.user1.name;Wt.user1=t,Wt.__v=t.__v,e.commit("lsGame"),e.commit("gameLog",s+" now known as "+t.name+"."),e.commit("setMessage",{userid:t._id,body:"üë§ "+s+" "+Object(u.t)("now known as")+" "+t.name+"."})}).on("USER_CHANGED_NAME",function(t){var s=Wt.user1.name;Wt.player(1).user.name=t.name,Wt.__v=t.__v,e.commit("lsGame"),e.commit("gameLog",s+" now known as "+t.name+"."),e.commit("setMessage",{userid:t._id,body:"üë§ "+s+" "+Object(u.t)("now known as")+" "+t.name+"."})}).on("GAME_CREATED",function(){Wt.__v=1,e.commit("lsGame"),e.commit("gameLog","Game saved in DB.")}).on("GAME_NOTFOUND",function(){e.commit("gameLog","Game "+Wt._id+" not found."),e.dispatch("newGame")}).on("GAME_DISPOSITION_SAVED",function(t){Wt.__v=t,e.commit("lsGame")}).on("GAME_GOT",function(t){e.commit("gotGame",t),e.commit("gameLog","Game got.")}).on("GAME_JOINED0",function(t){e.commit("gotGame",t),e.commit("gameLog",Object(u.t)("üîó Joined.")),e.commit("setMessage",{userid:Ht._id,body:Object(u.t)("üîó Joined.")})}).on("GAME_JOINED1",function(t){e.commit("gotGame",t),e.commit("gameLog",Wt.user1.name+" "+Object(u.t)("üîó Joined.")),e.commit("setMessage",{userid:Wt.playerId1,body:Object(u.t)("üîó Joined.")})}).on("GAME_MOVE",function(t){e.commit("moveGame",t)}).on("GAME_CHALLENGE",function(t){e.commit("setMessage",{userid:t,type:"challenge",body:Object(u.t)("üí£ New challenge")})}).on("MSG_RECEIVE",function(t){e.dispatch("receiveMessage",t)}).on("MSG_RECEIVED",function(e){t.messages[e].loading=!1,a.a.ls.set("messages",zt)})},authSocket:function(t){var e=Ht.tokens&&Ht.tokens.at?Ht.tokens.at:null;t.io.emit("authenticate",{token:e})},gotGame:function(t,e){Wt._id=e._id,Wt.turn=e.turn,Wt.__v=e.__v,Wt.players=e.players,Wt.playersIDs=e.playersIDs,Wt.newgame=e.newgame,this.commit("lsGame")},moveGame:function(t,e){if(Wt.turn=e.turn,Wt.__v=e.__v,e.changes){if(e.changes.board){for(var s in e.changes.board)for(var a=e.changes.board[s],i=0;i<a.length;i++)Wt.players[e.secondid].board[s[0]][s[1]][a[i][0]]=a[i][1];this.commit("setMessage",{userid:e.userid,body:Wt.boardIndexes.col[e.index[1]].toUpperCase()+Wt.boardIndexes.row[e.index[0]]+" <i>‚Üí</i> "+Object(u.t)(e.class)+"."});var n=+(Wt.playerId1===e.secondid);this.commit("setLastCell",""+n+e.index[0]+e.index[1])}if(e.changes.boat){if(e.changes.boat.n){var o=e.changes.boat.n;Wt.players[e.secondid].boat.n[o[0]][1]=o[1]}e.changes.boat.c&&(Wt.players[e.secondid].boat.c=e.changes.boat.c)}e.newgame&&(Wt.newgame=e.newgame,this.dispatch("endGame",e.userid)),this.commit("lsGame"),this.commit("chekTab")}},chekTab:function(t){t.tab||Wt.turn!==Ht._id||this.dispatch("notify",Object(u.t)("Your turn!"))}},actions:{notify:function(t,e){kt.a.create(e,{icon:"/static/apple-touch-icon.png",timeout:1e4,onClick:function(){window.focus(),this.close()}})},setIoQueue:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=e.method,a=e.tosend;if(!t.state.io.connected)return xt.a.queue.push({method:s,tosend:a}),void t.commit("gameLog","Queue: "+s+".");var i=Wt._id||null,n=Wt.user1._id||null;if(t.state.io.emit("register",i,Ht._id,n),s&&a)t.state.io.emit(s,a);else for(;xt.a.queue.length;){var o=xt.a.queue.pop(),r=o.method,c=o.tosend;t.state.io.emit(r,c)}},createUser:function(t){t.state.user=Ht=new Gt(!0),Ht.lang=t.state.lang,t.commit("lsUser")},getUser:function(t){var e=t.commit,s=t.dispatch;if(Ht.__v<=0)return!1;s("checkToken").then(function(t){if(t){var s={userid:Ht._id};return wt.a.put("https://desolate-lake-69712.herokuapp.com/auth/get",s).then(function(t){Ht.name=t.data.name,Ht.email=t.data.email,Ht.__v=t.data.__v,e("lsUser")}).catch(function(t){t.response&&t.response.data?e("setText",t.response.data):console.log(t)})}}).catch(function(){return!1})},setUserPhase:function(t,e){var s=t.commit,a=t.dispatch;s("setText",""),Ht.phase=e,"signed"===e?s("authSocket"):a("deleteToken"),s("lsUser")},signIn:function(t,e){var s=t.commit,a=t.dispatch,i=e.email,n=e.password;Ht.email=i,s("lsUser");var o={userid:Ht._id,name:Ht.name,lang:Ht.lang,email:i,password:n};return wt.a.put("https://desolate-lake-69712.herokuapp.com/auth/signin",o).then(function(t){s("setText",t.data),Ht._id=t.data._id,Ht.name=t.data.name,Ht.email=t.data.email,Ht.__v=t.data.__v,Ht.tokens=t.data.tokens,a("changePlayer"),a("setUserPhase","signed"),s("switchLang",t.data.lang)}).catch(function(t){t.response&&t.response.data?"emailNotVerified"===t.response.data?a("setUserPhase","secret"):s("setText",t.response.data):console.log(t)})},verifyEmail:function(t,e){var s=t.commit,a=t.dispatch,i={userid:Ht._id,email:Ht.email,secret:e};return wt.a.put("https://desolate-lake-69712.herokuapp.com/auth/verifyemail",i).then(function(){a("setUserPhase","emailVerified")}).catch(function(t){s("setText",t.response.data)})},changePlayerInfo:function(t,e){var s=t.commit,a=t.dispatch,i=e.field,n=e.val;a("checkToken").then(function(t){if(t){Ht[i]=n,s("lsUser");var e={userid:Ht._id,field:i,val:n};return wt.a.put("https://desolate-lake-69712.herokuapp.com/auth/edit",e).then(function(){"name"===i&&a("changePlayerName")}).catch(function(t){t.response&&t.response.data?"emailNotVerified"===t.response.data?a("setUserPhase","secret"):s("setText",t.response.data):console.log(t)})}}).catch(function(){return!1})},checkValidInfo:function(t,e){var s={field:e.field,val:e.val};return wt.a.put("https://desolate-lake-69712.herokuapp.com/auth/check",s)},checkToken:function(t){t.commit;var e=t.dispatch;if(!Ht.tokens||!Ht.tokens.at)return!1;var s={userid:Ht._id,token:Ht.tokens.at};return wt.a.put("https://desolate-lake-69712.herokuapp.com/auth/checktoken",s).then(function(){return!0}).catch(function(t){if(t.response&&t.response.data){if("TokenExpiredError"===t.response.data)return e("refreshToken");e("createUser"),e("changePlayer")}else console.log(t);return!1})},refreshToken:function(t){var e=t.commit,s=t.dispatch;if(Ht.tokens&&Ht.tokens.rt){var a={userid:Ht._id,token:Ht.tokens.rt};return e("setText",Object(u.t)("üì° Connecting...")),wt.a.put("https://desolate-lake-69712.herokuapp.com/auth/refreshtoken",a).then(function(t){e("setText",""),Ht.tokens=t.data.tokens,s("setUserPhase","signed")}).catch(function(t){e("setText",""),s("createUser"),s("changePlayer"),t.response&&t.response.data?"TokenNotFoundError"===t.response.data?e("setText","Invalid token."):"TokenExpiredError"===t.response.data?e("setText","Token Expired."):e("setText",t.response.data):console.log(t)})}},deleteToken:function(t){t.commit;var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Ht.tokens||e){var s={userid:Ht._id};return e?s.all=e:s.token=Ht.tokens.rt,Ht.tokens=null,wt.a.put("https://desolate-lake-69712.herokuapp.com/auth/deletetoken",s)}},createGame:function(t){if(t.commit("gameLog","v: 0.9.1"),Wt.__v)t.dispatch("getGame",!0);else{var e={gameid:Wt._id,userid:Ht._id,name:Ht.name};Wt.playerId1&&(e.challenge=Wt.playerId1,Wt.user1=new Gt),t.commit("lsGame"),t.dispatch("setIoQueue",{method:"createGame",tosend:e}),t.commit("gameLog","Game: "+Wt._id+"."),t.commit("clearMessages"),t.commit("setMessage",{type:"newgame",body:Object(u.t)("üéÆ New game:")+" "+Wt._id+"."})}},newGame:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.commit("setText",""),t.commit("setBoard",0),t.commit("setLastCell",""),t.state.game=Wt=new Ut(Ht,Wt.user1),e?Wt._id=e:Wt.playerId1&&(Wt.user1=new Gt),t.commit("clearMessages"),t.commit("gameLog","New game: "+Wt._id+"."),t.dispatch("createGame")},getGame:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s={gameid:Wt._id,userid:Ht._id};e||(s.__v=Wt.__v),t.dispatch("setIoQueue",{method:"getGame",tosend:s}),t.commit("gameLog","Get.")},disposition:function(t,e){var s=t.dispatch;Wt.disposition(e),s("saveGameDisposition")},autoDisposition:function(t){var e=t.dispatch;Wt.autoDisposition(),e("saveGameDisposition")},clearDisposition:function(t){var e=t.dispatch;Wt.clearDisposition(),e("saveGameDisposition")},finishDisposition:function(t){var e=t.dispatch;Wt.finishDisposition(),e("saveGameDisposition")},saveGameDisposition:function(t){t.commit("lsGame");var e={gameid:Wt._id,userid:Ht._id,player:Wt.player()};t.dispatch("setIoQueue",{method:"saveGameDisposition",tosend:e})},endGame:function(t,e){var s=t.commit;s("setText",Wt.players[e].user.name+" "+Object(u.t)("üëë üòé üéá üèÜ Won!")),s("setMessage",{userid:e,body:Object(u.t)("üëë üòé üéá üèÜ Won!")})},move:function(t,e){if(Wt.turn===Ht._id){var s=Wt.cell(e,1,!0);if(!s.class){Wt.turn+="move",s.class="loading";var a={_id:Wt._id,userid:Ht._id,secondid:Wt.playerId1,index:e};t.dispatch("setIoQueue",{method:"moveGame",tosend:a})}}},changePlayer:function(t){var e=Wt.playerId0;e!==Ht._id&&(Wt.user0=Ht,Wt.__v++,t.commit("lsGame"));var s={gameid:Wt._id,userprev:e,userid:Ht._id,name:Ht.name};t.dispatch("setIoQueue",{method:"changePlayer",tosend:s})},changePlayerName:function(t){Wt.player().user.name=Ht.name,t.commit("lsGame");var e={gameid:Wt._id,userid:Ht._id,name:Ht.name};t.dispatch("setIoQueue",{method:"changePlayerName",tosend:e})},sendMessage:function(t,e){e=e.replace(new RegExp("\\n","g"),"<br>");var s=new At({userid:Ht._id,body:e,direct:!0},Wt);t.commit("setMessage",s);var a={msgid:s._id,userid:Ht._id,body:e,direct:!0,user1:Wt.playerId1};t.dispatch("setIoQueue",{method:"sendMessage",tosend:a})},receiveMessage:function(t,e){var s=e.msgid,a=void 0===s?null:s,i=e.userid,n=void 0===i?null:i,o=e.body,r=void 0===o?null:o,c=e.direct,l=void 0!==c&&c;t.commit("setMessage",{_id:a,userid:n,body:r,direct:l,loading:!1});var d={msgid:a,userid:n,received:!0};t.dispatch("setIoQueue",{method:"sendMessage",tosend:d})}}}),Qt=Jt;Gt.isValid(Ht)||(Wt=!1,Jt.dispatch("createUser")),Ut.isValid(Wt,Ht)?Wt=new Ut(null,null,Wt):(Wt=new Ut(Ht,new Gt),Jt.commit("lsGame")),Jt.state.game=Wt,Jt.commit("setSocket");s("uMhA");a.a.config.productionTip=!1,new a.a({el:"#app",router:pt,store:Qt,components:{App:$},template:"<App/>"})},Nopy:function(t,e,s){var a={"./ar":["VyJT",42],"./ar.js":["VyJT",42],"./bg":["SLVh",41],"./bg.js":["SLVh",41],"./ca":["83DG",40],"./ca.js":["83DG",40],"./cs":["JqVi",39],"./cs.js":["JqVi",39],"./da":["wTRM",38],"./da.js":["wTRM",38],"./de":["qqz1",37],"./de.js":["qqz1",37],"./el":["C0pp",36],"./el.js":["C0pp",36],"./en":["q4V8",35],"./en.js":["q4V8",35],"./es":["On01",34],"./es.js":["On01",34],"./et":["s3bG",33],"./et.js":["s3bG",33],"./eu":["tkys",32],"./eu.js":["tkys",32],"./fa":["fvW7",31],"./fa.js":["fvW7",31],"./fi":["1PBi",30],"./fi.js":["1PBi",30],"./fr":["f6T5",29],"./fr.js":["f6T5",29],"./he":["5eGL",28],"./he.js":["5eGL",28],"./hr":["L9W1",27],"./hr.js":["L9W1",27],"./hu":["TCJ8",26],"./hu.js":["TCJ8",26],"./id":["UbIi",25],"./id.js":["UbIi",25],"./it":["3ARs",24],"./it.js":["3ARs",24],"./ja":["7Ppv",23],"./ja.js":["7Ppv",23],"./ka":["y3wm",22],"./ka.js":["y3wm",22],"./ko":["V1y3",21],"./ko.js":["V1y3",21],"./lt":["81Um",20],"./lt.js":["81Um",20],"./ms_MY":["6tJC",19],"./ms_MY.js":["6tJC",19],"./nb_NO":["It0Z",18],"./nb_NO.js":["It0Z",18],"./nl":["a/Fw",17],"./nl.js":["a/Fw",17],"./nn_NO":["olNl",16],"./nn_NO.js":["olNl",16],"./pl":["ft6H",15],"./pl.js":["ft6H",15],"./pt_BR":["RAMx",14],"./pt_BR.js":["RAMx",14],"./pt_PT":["kkp4",13],"./pt_PT.js":["kkp4",13],"./ro":["58d4",12],"./ro.js":["58d4",12],"./ru":["+/GF",11],"./ru.js":["+/GF",11],"./sk":["o5Z/",10],"./sk.js":["o5Z/",10],"./sl":["Hc5Z",9],"./sl.js":["Hc5Z",9],"./sq":["T6fw",8],"./sq.js":["T6fw",8],"./sr":["yM2l",7],"./sr.js":["yM2l",7],"./sv":["e79x",6],"./sv.js":["e79x",6],"./th":["JVDA",5],"./th.js":["JVDA",5],"./tr":["PZKE",4],"./tr.js":["PZKE",4],"./uk":["cm2k",3],"./uk.js":["cm2k",3],"./vi":["JffR",2],"./vi.js":["JffR",2],"./zh_CN":["+8+3",1],"./zh_CN.js":["+8+3",1],"./zh_TW":["1SbN",0],"./zh_TW.js":["1SbN",0]};function i(t){var e=a[t];return e?s.e(e[1]).then(function(){return s(e[0])}):Promise.reject(new Error("Cannot find module '"+t+"'."))}i.keys=function(){return Object.keys(a)},i.id="Nopy",t.exports=i},fyY6:function(t,e){},g4JP:function(t,e){},jB5O:function(t,e){},kOGW:function(t,e){},l2lM:function(t,e){},t6BR:function(t,e){},"uK/s":function(t,e){},uMhA:function(t,e){},uqRF:function(t,e){},vmKa:function(t,e){},yYtQ:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.118480c82bfaa72ad444.js.map