webpackJsonp([1],{"4koi":function(t,e){},"7WwI":function(t,e){},KDU7:function(t,e){},KcSr:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("7+uW"),a=s("kG3H"),n=s.n(a),o={props:{options:{type:Object,default:function(){return{}}}},mounted:function(){this.init()},beforeDestroy:function(){this.flickity.destroy(),this.flickity=null},methods:{init:function(){this.flickity=new n.a(this.$el,this.options),this.$emit("init",this.flickity)},next:function(t,e){this.flickity.next(t,e)},previous:function(t,e){this.flickity.previous(t,e)},select:function(t,e,s){this.flickity.select(t,e,s)},selectedIndex:function(){return this.flickity.selectedIndex},selectCell:function(t,e,s){this.flickity.selectCell(t,e,s)},resize:function(){this.flickity.resize()},reposition:function(){this.flickity.reposition()},prepend:function(t){this.flickity.prepend(t)},append:function(t){this.flickity.append(t)},insert:function(t,e){this.flickity.insert(t,e)},remove:function(t){this.flickity.remove(t)},playPlayer:function(){this.flickity.playPlayer()},stopPlayer:function(){this.flickity.stopPlayer()},pausePlayer:function(){this.flickity.pausePlayer()},unpausePlayer:function(){this.flickity.unpausePlayer()},rerender:function(){this.flickity.destroy(),this.init()},destroy:function(){this.flickity.destroy()},reloadCells:function(){this.flickity.reloadCells()},getCellElements:function(){this.flickity.getCellElements()},data:function(){return n.a.data(this.$el)},on:function(t,e){this.flickity.on(t,e)},off:function(t,e){this.flickity.off(t,e)},once:function(t,e){this.flickity.once(t,e)}}},r={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._t("default")],2)},staticRenderFns:[]},l=s("VU/8")(o,r,!1,null,null,null).exports,c={name:"Bar",data:function(){return{flickityOptions:{draggable:!0,freeScroll:!0,contain:!0,prevNextButtons:!1,pageDots:!1,cellAlign:"left"},flickityVector:"init"}},props:["title"],computed:{captain:function(){return this.$store.state.user.name},flickityStyle:function(){return this.flickityVector>0?"background: rgba(60,120,120, "+(.7-this.flickityVector/this.$store.state.window.width*.7)+");":"init"===this.flickityVector?"opacity:0;":""}},mounted:function(){this.$nextTick(function(){var t=this;this.resetFlickityVector(),this.$refs.flickity.on("dragMove",function(e,s,i){t.flickityVector=i.x}),this.$refs.flickity.on("dragEnd",function(e,s){t.flickityVector>0&&t.closeMenu()}),this.$refs.flickity.on("staticClick",function(e,s,i,a){void 0===a&&t.closeMenu()})})},methods:{switchMenu:function(t){this.$store.dispatch("barMenuOpen",t),this.resetFlickityVector()},closeMenu:function(){this.switchMenu(!1)},resetFlickityVector:function(){var t=this;setTimeout(function(){t.flickityVector=0},490)}},components:{Flickity:l}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"Bar plr",attrs:{id:"Bar"}},[s("router-link",{staticClass:"Bar__logo",attrs:{to:"/"}}),t._v(" "),s("div",{staticClass:"Bar-title"},[t._v(t._s(t.title))]),t._v(" "),s("div",{staticClass:"Bar-menu"},[s("div",{staticClass:"Bar-menu__icon",on:{click:function(e){t.switchMenu()}}})])],1),t._v(" "),s("flickity",{ref:"flickity",staticClass:"Bar-menu-panel-flickity",style:t.flickityStyle,attrs:{options:t.flickityOptions}},[s("div",{staticClass:"Bar-menu-panel plr"},[s("router-link",{staticClass:"Bar-menu__item",attrs:{to:"/user/"}},[t._v(t._s(t.captain))]),t._v(" "),s("router-link",{staticClass:"Bar-menu__item",attrs:{to:"/game/"}},[t._v("Game")]),t._v(" "),s("router-link",{staticClass:"Bar-menu__item",attrs:{to:"/rules/"}},[t._v("Rules")]),t._v(" "),s("router-link",{staticClass:"Bar-menu__item",attrs:{to:"/about/"}},[t._v("About")])],1)])],1)},staticRenderFns:[]};var u=s("VU/8")(c,d,!1,function(t){s("KcSr")},null,null).exports,h=s("z9mE"),p=s.n(h),m=new Date,f={name:"App",data:function(){return{transitionName:"slide-left"}},head:{meta:[{"http-equiv":"last-modified",content:m},{name:"Etag",content:m}]},computed:{home:function(){return"/"===this.$route.path},title:function(){return this.$route.name},appClass:function(){return"land"+this.$store.state.window.land+" Bar-menu-panel-open"+1*this.$store.state.barMenuOpened+(this.home?" home":"")},pullStyle:function(){return"height:"+this.$store.state.window.height+"px;"},mainStyle:function(){return"min-height:"+this.$store.state.window.mainHeight+"px;"}},components:{Bar:u,"vue-pull-refresh":p.a},methods:{windowResized:function(){this.$store.dispatch("windowResized")},closeMenu:function(){this.$store.dispatch("barMenuOpen",!1)},tabFocus:function(){this.$store.commit("setTab",!0)},tabBlur:function(){this.$store.commit("setTab",!1)},onRefresh:function(){this.$store.state.barMenuOpened||(window.location.reload(!0),this.$router.push(""))}},watch:{$route:function(t,e){this.closeMenu();var s=t.path.split("/").length,i=e.path.split("/").length;this.transitionName=s<i?"slide-right":"slide-left"}},mounted:function(){this.$nextTick(function(){window.addEventListener("resize",this.windowResized),this.windowResized(),window.addEventListener("focus",this.tabFocus),window.addEventListener("blur",this.tabBlur);var t=document.getElementById("app-start");t&&(t.className="out",setTimeout(function(){t.className="del"},3e3))})},beforeCreate:function(){this.$store.commit("setSocket",this.$socket)},beforeDestroy:function(){window.removeEventListener("resize",this.windowResized),window.removeEventListener("focus",this.tabFocus),window.removeEventListener("blur",this.tabBlur)}},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{class:this.appClass,attrs:{id:"App"}},[e("vue-pull-refresh",{style:this.pullStyle,attrs:{"on-refresh":this.onRefresh}},[e("bar",{attrs:{title:this.title}}),this._v(" "),e("div",{staticClass:"mainview",style:this.mainStyle},[e("transition",{attrs:{name:this.transitionName}},[e("router-view")],1)],1)],1)],1)},staticRenderFns:[]};var y=s("VU/8")(f,v,!1,function(t){s("PcQI")},null,null).exports,b=s("/ocq"),_=s("bm7V"),g=s.n(_),w=s("pFYg"),C=s.n(w),k={render:function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"showBlock"}},[this.text?e("div",{staticClass:"Text plr"},[e("div",{staticClass:"Text-text"},[this._v("\n        "+this._s(this.text)+"\n      ")])]):this._e()])},staticRenderFns:[]};var $=s("VU/8")({name:"Texts",data:function(){return{}},computed:{text:function(){return this.$store.state.text}}},k,!1,function(t){s("Whpl")},null,null).exports,B={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Boats-init plr"},[s("div",{staticClass:"Boats-text"},[t._v("\n    Take a disposition.\n     "),s("router-link",{attrs:{to:"/rules/#ships"}},[t._v("Rules")]),t._v("\n     "),s("button",{staticClass:"small grey",on:{click:t.autoDisposition}},[t._v("Auto")])],1),t._v(" "),s("div",{staticClass:"Boats"},[s("div",{staticClass:"Boats-group",class:t.boat4},[s("div",{staticClass:"Boats-boat",class:t.boat40},[s("div",{staticClass:"Boats-boat__cell"}),s("div",{staticClass:"Boats-boat__cell"}),s("div",{staticClass:"Boats-boat__cell"}),s("div",{staticClass:"Boats-boat__cell"})])]),s("div",{staticClass:"Boats-group",class:t.boat3},[s("div",{staticClass:"Boats-boat",class:t.boat30},[s("div",{staticClass:"Boats-boat__cell"}),s("div",{staticClass:"Boats-boat__cell"}),s("div",{staticClass:"Boats-boat__cell"})]),s("div",{staticClass:"Boats-boat",class:t.boat31},[s("div",{staticClass:"Boats-boat__cell"}),s("div",{staticClass:"Boats-boat__cell"}),s("div",{staticClass:"Boats-boat__cell"})])]),s("div",{staticClass:"Boats-group",class:t.boat2},[s("div",{staticClass:"Boats-boat",class:t.boat20},[s("div",{staticClass:"Boats-boat__cell"}),s("div",{staticClass:"Boats-boat__cell"})]),s("div",{staticClass:"Boats-boat",class:t.boat21},[s("div",{staticClass:"Boats-boat__cell"}),s("div",{staticClass:"Boats-boat__cell"})]),s("div",{staticClass:"Boats-boat",class:t.boat22},[s("div",{staticClass:"Boats-boat__cell"}),s("div",{staticClass:"Boats-boat__cell"})])]),s("div",{staticClass:"Boats-group",class:t.boat1},[s("div",{staticClass:"Boats-boat",class:t.boat10},[s("div",{staticClass:"Boats-boat__cell"})]),s("div",{staticClass:"Boats-boat",class:t.boat11},[s("div",{staticClass:"Boats-boat__cell"})]),s("div",{staticClass:"Boats-boat",class:t.boat12},[s("div",{staticClass:"Boats-boat__cell"})]),s("div",{staticClass:"Boats-boat",class:t.boat13},[s("div",{staticClass:"Boats-boat__cell"})])])]),t._v(" "),s("transition",{attrs:{name:"showBlock"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.disposition,expression:"disposition"}],staticClass:"Boats-text-finish"},[s("button",{staticClass:"small red",on:{click:t.finishDisposition}},[t._v("Ready?")]),t._v("\n       \n      "),s("button",{staticClass:"small grey",on:{click:t.clearDisposition}},[t._v("Clear")])])])],1)},staticRenderFns:[]};var x=s("VU/8")({name:"Boats",data:function(){return{boat:this.$store.state.game.players[this.$store.state.user._id].boat,boat10:this.boa(1,0),boat11:this.boa(1,1),boat12:this.boa(1,2),boat13:this.boa(1,3),boat20:this.boa(2,0),boat21:this.boa(2,1),boat22:this.boa(2,2),boat30:this.boa(3,0),boat31:this.boa(3,1),boat40:this.boa(4,0),boat1:this.group(1),boat2:this.group(2),boat3:this.group(3),boat4:this.group(4)}},computed:{boatcounter:function(){return this.$store.state.game.players[this.$store.state.user._id].boat.c},disposition:function(){return this.$store.state.game.players[this.$store.state.user._id].boat.ok}},methods:{boa:function(t,e){return this.$store.state.game.players[this.$store.state.user._id].boat.n[t][1]>e?"done":""},group:function(t){var e=this.$store.state.game.players[this.$store.state.user._id].boat;return e.n[t][1]>e.n[t][0]?"wrong":""},autoDisposition:function(){this.$store.dispatch("autoDisposition")},finishDisposition:function(){this.$store.dispatch("finishDisposition")},clearDisposition:function(){this.$store.dispatch("clearDisposition")}},watch:{boatcounter:function(){this.boat10=this.boa(1,0),this.boat11=this.boa(1,1),this.boat12=this.boa(1,2),this.boat13=this.boa(1,3),this.boat20=this.boa(2,0),this.boat21=this.boa(2,1),this.boat22=this.boa(2,2),this.boat30=this.boa(3,0),this.boat31=this.boa(3,1),this.boat40=this.boa(4,0),this.boat1=this.group(1),this.boat2=this.group(2),this.boat3=this.group(3),this.boat4=this.group(4)}}},B,!1,function(t){s("KDU7")},null,null).exports,E={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return"CellCol"===t.type?s("div",{staticClass:"Cell Board-row-a__cell",style:t.cellWidth},[t._v(t._s(t.content))]):"CellRow"===t.type?s("div",{staticClass:"Cell Board-row-1__cell",style:t.cellWidth},[t._v(t._s(t.content))]):"CellR"===t.type?s("div",{staticClass:"Cell Board__right-padding",style:t.cellWidth}):"Cell"===t.type?s("div",{staticClass:"Cell",class:t.boatClassProp,style:t.cellWidth,on:{click:t.cell}}):t._e()},staticRenderFns:[]};var T={name:"Board",data:function(){return{boardi:this.$store.state.boardi,board:!1}},computed:{boardWidth:function(){return"max-width:"+this.$store.state.window.boardWidth+"px"},version:function(){return this.$store.state.game.version}},methods:{watchVersion:function(){this.board=this.$store.state.game.players[this.playerid].board[this.player]}},props:["player","playerid"],components:{Cell:s("VU/8")({name:"Cell",data:function(){return{boatClassProp:""}},computed:{cellWidth:function(){return"width:"+this.$store.state.window.cellWidth+"px; height:"+this.$store.state.window.cellWidth+"px;"},boatcounter:function(){return"Cell"===this.type&&this.$store.state.game.players[this.playerid].boat.c},disposition:function(){return"disposition"===this.$store.state.game.players[this.$store.state.user._id].phase},ready:function(){return"ready"===this.$store.state.game.players[this.$store.state.players[0]].phase&&"ready"===this.$store.state.game.players[this.$store.state.players[1]].phase},turn:function(){return this.$store.state.game.turn===this.$store.state.user._id}},props:["row","col","type","content","player","playerid"],methods:{boatClass:function(){var t="",e=this.$store.state.game.players[this.playerid].board[this.player][this.row][this.col].boat,s=this.$store.state.game.players[this.playerid].boat;if(e)if(e[0]>4)t="boat-wrong";else{var i=s.n[e[0]];i&&i[1]>i[0]&&(t="boat-wrong")}return t},cell:function(){0===this.player&&this.disposition?this.$store.dispatch("disposition",[+this.row,+this.col]):1===this.player&&this.ready&&this.turn&&this.$store.dispatch("move",[+this.row,+this.col])}},watch:{boatcounter:function(){this.disposition&&"Cell"===this.type&&(this.boatClassProp=this.boatClass())}}},E,!1,function(t){s("tkzL")},null,null).exports},created:function(){this.watchVersion()},watch:{version:function(){this.watchVersion()}}},G={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Board",class:"player"+t.player+" playerid:"+t.playerid,style:t.boardWidth},[s("div",{staticClass:"Board-row Board-row-a"},[s("cell",{staticClass:"TurnIcon",attrs:{type:"CellRow"}}),t._l(t.boardi.col,function(t){return s("cell",{key:t+0,attrs:{type:"CellCol",content:t}})}),s("cell",{attrs:{type:"CellR"}})],2),t._v(" "),t._l(t.boardi.row,function(e,i){return s("div",{key:i,staticClass:"Board-row"},[s("cell",{attrs:{type:"CellRow",content:e}}),t._l(t.boardi.col,function(a,n){return s("cell",{key:a+e,class:t.board[i][n].class,attrs:{type:"Cell",row:i,col:n,player:t.player,playerid:t.playerid}})}),s("cell",{attrs:{type:"CellR"}})],2)})],2)},staticRenderFns:[]},O={name:"Basic",data:function(){return{players:!1,playername0:!1,playername1:!1,flickityOptions:{prevNextButtons:!1,pageDots:!1,dragThreshold:10,draggable:!1},endgame:!0}},computed:{disposition:function(){return"disposition"===this.$store.state.game.players[this.$store.state.user._id].phase},phase:function(){return this.$store.state.game.players[this.$store.state.user._id].phase},boardWidth:function(){return"width:"+this.$store.state.window.boardWidth+"px; height:"+this.$store.state.window.boardWidth+"px;"},land:function(){return this.$store.state.window.land},version:function(){return this.$store.state.game.version},ready:function(){return"ready"===this.$store.state.game.players[this.$store.state.players[0]].phase&&"ready"===this.$store.state.game.players[this.$store.state.players[1]].phase},turnClass:function(){var t="";return this.ready&&(this.turn(0)?t="p0":this.turn(1)&&(t="p1")),t},console:function(){return this.$store.state.console}},methods:{newGame:function(){this.switchBoard(0),this.$store.dispatch("newGame",this.endgame)},lifeStyle:function(t){var e="";if(this.ready){var s=this.$store.state.game.players[this.$store.state.players[t]].boat.c;e="width:"+s+"%;",s<40&&(e+="background:#ff4040;")}return e},turn:function(t){return this.$store.state.game.turn===this.$store.state.players[t]},currentBoard:function(t){return this.$store.state.currentBoard===t},switchBoard:function(t){this.disposition||this.currentBoard(t)||this.$refs.flickity.select(t)},selectBoard:function(){var t=this;this.$refs.flickity.on("select",function(){t.$store.dispatch("selectBoard",this.selectedIndex)})},watchPhase:function(){2!==this.land&&(this.disposition||("undefined"!==C()(this.$refs.flickity)&&(this.$refs.flickity.destroy(),this.flickityOptions.draggable=!0,this.$refs.flickity.init()),this.selectBoard()))},watchLand:function(t){var e=C()(this.$refs.flickity);2===t&&"undefined"!==e?this.$refs.flickity.destroy():2!==t&&"undefined"===e&&this.watchPhase()},watchVersion:function(){this.playername0=this.$store.state.game.players[this.$store.state.players[0]].user.name,this.playername1=this.$store.state.game.players[this.$store.state.players[1]].user.name,this.players=this.$store.state.players;var t=this.$store.state.currentBoard,e=1-this.$store.state.currentBoard;if(this.turn(t)){var s=this;setTimeout(function(){s.switchBoard(e)},2e3)}this.endgame=this.$store.state.game.newgame}},mounted:function(){this.$nextTick(function(){this.watchPhase()})},created:function(){this.watchVersion()},watch:{land:function(t){this.watchLand(t)},phase:function(){this.watchPhase()},version:function(){this.watchVersion()}},components:{Texts:$,Boats:x,Board:s("VU/8")(T,G,!1,null,null,null).exports,Flickity:l}},R={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav",{staticClass:"nav-boarduser"},[s("transition-group",[s("div",{key:"0",staticClass:"nav-boarduser__butto p0",class:{active:t.currentBoard(0)}},[s("div",{staticClass:"nav-boarduser__button",on:{click:function(e){t.switchBoard(0)}}},[t._v(t._s(t.playername0))]),t._v(" "),s("div",{staticClass:"nav-boarduser__life",style:t.lifeStyle(0)})]),s("div",{key:"2",staticClass:"nav-boarduser__vs",class:t.turnClass},[t._v("vs\n      ")]),s("div",{key:"1",staticClass:"nav-boarduser__butto p1",class:{active:t.currentBoard(1)}},[s("div",{staticClass:"nav-boarduser__button",on:{click:function(e){t.switchBoard(1)}}},[t._v(t._s(t.playername1))]),t._v(" "),s("div",{staticClass:"nav-boarduser__life",style:t.lifeStyle(1)})])])],1),t._v(" "),s("texts"),t._v(" "),s("transition",{attrs:{name:"showBlock"}},[t.disposition?s("boats"):t._e(),t._v(" "),t.endgame?s("div",{staticClass:"new-game"},[s("button",{staticClass:"small red",on:{click:t.newGame}},[t._v("New game?")])]):t._e()],1),t._v(" "),s("flickity",{ref:"flickity",staticClass:"boarduser-boards",class:{disposition:t.disposition},style:t.boardWidth,attrs:{options:t.flickityOptions}},t._l(t.players,function(t,e){return s("board",{key:e,attrs:{player:e,playerid:t}})})),t._v(" "),s("div",{staticClass:"Console plr"},[s("pre",[t._v(t._s(t.console))])])],1)},staticRenderFns:[]};var V=s("VU/8")(O,R,!1,function(t){s("7WwI")},null,null).exports,M={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"form User-form plr"},[s("div",{staticClass:"form-row",class:t.clas.name},[s("label",{attrs:{for:"name"}},[t._v("Name")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text",id:"name"},domProps:{value:t.name},on:{change:function(e){t.userHandle("name")},input:function(e){e.target.composing||(t.name=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-row",class:t.clas.email},[s("label",{attrs:{for:"email"}},[t._v("Email")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"email",id:"email"},domProps:{value:t.email},on:{change:function(e){t.userHandle("email")},input:function(e){e.target.composing||(t.email=e.target.value)}}})])])])},staticRenderFns:[]};var P=s("VU/8")({name:"User",data:function(){return{name:this.$store.state.user.name,email:this.$store.state.user.email,clas:{name:"",email:""}}},computed:{version:function(){return this.$store.state.user.version}},methods:{userHandle:function(t,e){this.clas[t]="loading",this.$store.dispatch("setPlayer",{type:t,items:this[t]})},watchVersion:function(){this.clas.name="",this.clas.email=""}},watch:{version:function(){this.watchVersion()}}},M,!1,function(t){s("4koi")},"data-v-35df0c93",null).exports,S={name:"Game",data:function(){return{gameLink:!1,secondName:!1,gameLinkCopied:!1,gameJoined:!1,waitRedirect:!1,gameFight:""}},computed:{gameId:function(){return this.$store.state.game._id},version:function(){return this.$store.state.game.version}},methods:{gameLinkF:function(t){return location.origin+"/#/g/"+t},secondNameF:function(){return this.$store.state.game.players[this.$store.state.players[1]]?this.$store.state.game.players[this.$store.state.players[1]].user.name:""},handleCopy:function(t){this.gameLinkCopied=!0},handleNew:function(){this.gameLinkCopied=!1,this.$store.dispatch("newGame")},watchVersion:function(){if(this.gameJoined=0!=+this.$store.state.players[1]?"Both captains are joined.":this.gameJoined,this.gameJoined&&this.waitRedirect){this.gameFight="Let the fight begin!";var t=this.$router;setTimeout(function(){t.push("/")},3e3)}this.gameLink=this.gameLinkF(this.$store.state.game._id),this.secondName=this.secondNameF()}},created:function(){var t=this;this.watchVersion();var e=this.$route.params.gameId;void 0!==e&&e!==this.gameId?this.$store.dispatch("joinGame",e).then(function(e){t.gameJoined="Connecting, please wait...",t.waitRedirect=!0}):0===this.version&&this.$store.dispatch("saveGame")},watch:{gameId:function(t){this.gameLink=this.gameLinkF(t),this.secondName=this.secondNameF()},version:function(){this.watchVersion()}}},N={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"form Game-form plr"},[s("transition-group",{attrs:{name:"showBlock"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.gameJoined,expression:"gameJoined"}],key:"joined1",staticClass:"Game-joined"},[s("p",[s("b",[t._v(t._s(t.gameJoined))])]),t._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:t.gameFight,expression:"gameFight"}]},[s("b",[t._v(t._s(t.gameFight))])])]),t._v(" "),t.gameLinkCopied?s("div",{key:"copy1",staticClass:"Game-link-copied"},[s("p",[t._v("\n          The link is copied.\n        ")])]):s("div",{key:"copy0",staticClass:"Game-link"},[s("p",[t._v("\n          Send this link to the second captain "),s("nobr",[t._v("("+t._s(t.secondName)+")")]),t._v(" to join your game.\n        ")],1),t._v(" "),s("div",{staticClass:"form-row"},[s("label",{attrs:{for:"gameLink"}},[t._v("Link")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.gameLink,expression:"gameLink"}],attrs:{type:"text",id:"gameLink"},domProps:{value:t.gameLink},on:{input:function(e){e.target.composing||(t.gameLink=e.target.value)}}})]),t._v(" "),s("a",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.gameLink,expression:"gameLink",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.handleCopy,expression:"handleCopy",arg:"success"}],staticClass:"button"},[t._v("Copy link")])])]),t._v(" "),s("div",{staticClass:"Game-new"},[s("a",{staticClass:"button grey",on:{click:t.handleNew}},[t._v("New game")])])],1)])},staticRenderFns:[]};var W=s("VU/8")(S,N,!1,function(t){s("i10b")},null,null).exports,F={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"Rules plr"},[s("h2",[t._v("Battleship")]),t._v(" "),s("p",[t._v("\n      Battleship (also Battleships or Sea Battle) is a guessing game for two players. It is played on ruled grids (paper or board) on which the players' fleets of ships (including battleships) are marked. The locations of the fleet are concealed from the other player. Players alternate turns calling \"shots\" at the other player's ships, and the objective of the game is to destroy the opposing player's fleet.\n    ")]),t._v(" "),s("p",[t._v("\n      Battleship is known worldwide as a pencil and paper game which dates from World War I. It was published by various companies as a pad-and-pencil game in the 1930s, and was released as a plastic board game by Milton Bradley in 1967. The game has spawned electronic versions, video games, smart device apps and a film.\n    ")]),t._v(" "),s("h2",{attrs:{id:"ships"}},[t._v("Ships")]),t._v(" "),s("table",[s("tr",[s("th",[t._v("\n          Type of ship\n        ")]),t._v(" "),s("th",[t._v("\n          Quantity\n        ")])]),t._v(" "),s("tr",[s("td",[t._v("\n          battleship (four-decker)\n        ")]),t._v(" "),s("td",{staticClass:"center"},[t._v("\n          1\n        ")])]),t._v(" "),s("tr",[s("td",[t._v("\n          cruiser (three-decker)\n        ")]),t._v(" "),s("td",{staticClass:"center"},[t._v("\n          2\n        ")])]),t._v(" "),s("tr",[s("td",[t._v("\n          destroyer (two-decker)\n        ")]),t._v(" "),s("td",{staticClass:"center"},[t._v("\n          3\n        ")])]),t._v(" "),s("tr",[s("td",[t._v("\n          submarine (single-decker)\n        ")]),t._v(" "),s("td",{staticClass:"center"},[t._v("\n          4\n        ")])])])])])}]};var L=s("VU/8")({name:"Rules"},F,!1,function(t){s("avIY")},null,null).exports,D={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"About plr"},[s("h2",[t._v("SeaBattle uses:")]),t._v(" "),s("p",[t._v("\n      Vue,\n      Vuex,\n      Socket.io,\n      Webpack\n    ")]),t._v(" "),s("p",[t._v("\n      Clone,\n      Es6-promise,\n      Eslint,\n      Push.js,\n      Shortid,\n      Vue-flickity,\n      Vue-ls,\n      Vue-pull-refresh,\n      Vue-router\n    ")]),t._v(" "),s("h3",[t._v("Server side:")]),t._v(" "),s("p",[t._v("\n      Heroku.com,\n      Mlab.com,\n      Express,\n      Mongoose\n    ")]),t._v(" "),s("p",[t._v("\n      Cors,\n      Socket.io\n    ")])])])}]};var U=s("VU/8")({name:"About"},D,!1,function(t){s("Qsaf")},null,null).exports,z={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"Console plr"},[e("pre",[this._v(this._s(this.console))])])])},staticRenderFns:[]};var j=s("VU/8")({name:"Console",data:function(){return{}},computed:{console:function(){return this.$store.state.console}}},z,!1,function(t){s("t6BR")},"data-v-3c73474c",null).exports,J=s("RZCy"),A=s.n(J);i.a.use(b.a),i.a.use(g.a),i.a.use(A.a);var I=new b.a({mode:"hash",routes:[{path:"/",name:"Basic",component:V},{path:"/g/:gameId",name:"Join Game",component:W},{path:"/user",name:"Captain",component:P},{path:"/game",name:"Game",component:W},{path:"/rules",name:"Rules",component:L},{path:"/about",name:"About",component:U},{path:"/console",name:"Console",component:j}]}),H=s("hMcO"),K=s.n(H),Q=s("fZjL"),q=s.n(Q),Y=s("NYxO"),Z=s("yXtV"),X=s.n(Z),tt=s("hKoQ"),et=s("wvfG"),st=s.n(et),it=s("Q+y4"),at=s.n(it),nt=s("jNuQ"),ot=s.n(nt);Object(tt.polyfill)(),i.a.use(Y.a),i.a.use(X.a,{namespace:"vue__"}),i.a.use(st.a);var rt=s("i8ii"),lt=rt.user,ct=rt.game,dt=rt.players,ut=rt.window,ht=!1,pt=new Y.a.Store({state:{io:{},boardi:rt.boardi,user:lt,game:ct,players:dt,currentBoard:0,window:ut,barMenuOpened:!1,text:"",tab:!0,console:"game: "+ct._id+"\r\nv: 0.7.1\r\n"},getters:{},mutations:{setTab:function(t,e){t.tab=e},setSocket:function(t,e){t.io=e,e.emit("register",ct._id)},SOCKET_CONNECT:function(t){t.io.emit("register",ct._id),ht||this.dispatch("getGame"),t.console="socket connect\r\n"+t.console},SOCKET_CONNECT_ERROR:function(t){t.console="socket error\r\n"+t.console},SOCKET_UPDATE_USER:function(t,e){var s=e.pop();lt.version=s.version,s._id===lt._id&&(lt.name=s.name,this.commit("setUser"),t.console="user: "+s.name+"\r\n"+t.console)},SOCKET_UPDATE_GAME_USER:function(t,e){var s=e.pop();ct.version=s.version,ct.players[s._id].user.name=s.name,this.commit("setGame"),s._id!==lt._id&&(t.console="Opponent rename: "+s.name+"\r\n"+t.console)},SOCKET_JOIN_GAME:function(t,e){var s=e.pop(),i=q()(JSON.parse(s.players));i.splice(i.indexOf(lt._id),1);var a=i.shift();this.commit("setSecondPlayer",a),ct.players[0]&&delete ct.players[0],t.console="joined\r\n"+t.console,this.commit("updateGame",s)},SOCKET_UPDATE_GAME:function(t,e){var s=e.pop();this.commit("updateGame",s)},updateGame:function(t,e){ct.turn=e.turn,ct.version=e.version,ct.players=JSON.parse(e.players);var s=ct.players[t.players[1]];if(s&&s.board)if("end"===ct.players[t.players[0]].phase||"end"===ct.players[t.players[1]].phase)e.newgame&&(ct.newgame=e.newgame),"end"===ct.players[t.players[0]].phase?this.dispatch("endGame",0):"end"===ct.players[t.players[1]].phase&&this.dispatch("endGame",1);else{if("ready"===ct.players[t.players[0]].phase&&"ready"===ct.players[t.players[1]].phase){if(e.lastid){ct.players[e.lastid].board[0][e.lastindex[0]][e.lastindex[1]].class+=" last";var i=1-dt.indexOf(e.lastid);t.console=ct.players[dt[i]].user.name+": "+rt.boardi.col[e.lastindex[1]]+rt.boardi.row[e.lastindex[0]]+"\r\n"+t.console}ct.turn!==lt._id||t.tab||this.dispatch("notify",lt.name+", your turn!")}s.board[0]=!1}this.commit("setGame"),t.console="upd: "+ct.version+"\r\n"+t.console},set:function(t,e){var s=e.type,i=e.items;t[s]=i},setUser:function(t){t.user=lt,i.a.ls.set("user",lt)},setSecondPlayer:function(t,e){t.players[1]=e},setGame:function(t){t.game=ct,i.a.ls.set("game",ct)},setText:function(t,e){t.text=e},barMenuOpen:function(t,e){var s=e.isOpened;t.barMenuOpened="toggle"!==s?s:!t.barMenuOpened}},actions:{notify:function(t,e){at.a.create(e,{icon:"/static/apple-touch-icon.png",timeout:1e4,onClick:function(){ut.focus(),this.close()}})},setPutTimer:function(t,e){var s=e.method,i=e.tosend;t.state.io.emit("register",ct._id),ct.version--,clearTimeout(ht);var a=ct.version;t.state.io.connected?t.state.io.emit(s,i):ht=setTimeout(function(){a===ct.version?(t.state.console="timer: "+ct.version+"\r\n"+t.state.console,t.dispatch("setPutTimer",{method:s,tosend:i})):(clearTimeout(ht),ht=!1)},5e3)},newGame:function(t,e){return void 0===e&&(e=!1),t.dispatch("selectBoard",0),t.commit("setText",""),ct=rt.newGame(),t.commit("setSecondPlayer",0),e?(ct._id=e,t.commit("setGame"),t.dispatch("saveOrJoinGame")):t.dispatch("saveGame"),t.state.console="new game: "+ct._id+"\r\n"+t.state.console,!0},setPlayer:function(t,e){var s=t.commit,i=t.dispatch,a=e.type,n=e.items;lt[a]=n,s("setUser"),i("setPutTimer",{method:"saveUser",tosend:{_id:ct._id,user:lt}})},disposition:function(t,e){t.commit;var s=t.dispatch,i=ct.players[dt[0]].board[0][e[0]][e[1]].class;"none"===i?rt.setCell(e):"boat"===i&&rt.delCell(e),s("saveGame")},autoDisposition:function(t){var e=t.dispatch;rt.autoDisposition(),e("saveGame")},saveGame:function(t){t.commit("setGame");var e=ot()(ct);t.dispatch("setPutTimer",{method:"save",tosend:e})},saveOrJoinGame:function(t){var e=ot()(ct);t.dispatch("setPutTimer",{method:"join",tosend:e}),t.state.console="join\r\n"+t.state.console},joinGame:function(t,e){ct._id=e,t.commit("setText",""),t.commit("setSecondPlayer",0);var s={_id:e,userid:lt._id};t.dispatch("setPutTimer",{method:"join",tosend:s}),t.state.console="join\r\n"+t.state.console},finishDisposition:function(t){t.commit;var e=t.dispatch;rt.finishDisposition(),ct.players[lt._id].phase="ready",ct.players[lt._id].boat.n=rt.boatinit.n,ct.players[lt._id].boat.c=100,ct.players[lt._id].boat.ok=rt.boatinit.ok,e("saveGame")},endGame:function(t,e){var s=t.commit;e=1-e,ct.players[dt[e]].board[1]=ct.players[dt[e]].board[0],ct.version++,s("setGame"),s("setText",ct.players[dt[e]].user.name+" won!")},clearDisposition:function(t){var e=t.dispatch;rt.clearDisposition(),ct.players[lt._id].boat=rt.boatinit,e("saveGame")},getGame:function(t){if(ct.version>0){var e={_id:ct._id,userid:lt._id};t.dispatch("setPutTimer",{method:"get",tosend:e}),t.state.console="get\r\n"+t.state.console}},selectBoard:function(t,e){(0,t.commit)("set",{type:"currentBoard",items:+e})},barMenuOpen:function(t,e){(0,t.commit)("barMenuOpen",{isOpened:e=void 0!==e?e:"toggle"})},move:function(t,e){if(ct.turn===lt._id){var s=ct.players[dt[1]].board[1][e[0]][e[1]];if("none"===s.class){ct.turn+="moves",s.class="loading";var i={_id:ct._id,userid:lt._id,secondid:dt[1],index:e};t.dispatch("setPutTimer",{method:"move",tosend:i}),t.state.console="move: "+rt.boardi.col[e[1]]+rt.boardi.row[e[0]]+"\r\n"+t.state.console}}},windowResized:function(t){var e=t.commit;ut.width=document.documentElement.clientWidth,ut.height=document.documentElement.clientHeight,ut.land=ut.width>ut.height?1:0,ut.boardWidth=ut.land?ut.height:ut.width,ut.boardWidth>ut.boardMaxWidth&&(ut.boardWidth=ut.boardMaxWidth),ut.cellWidth=ut.boardWidth/11,ut.width>2*ut.boardWidth+20&&(ut.land=2),ut.barHeight=document.getElementById("Bar").offsetHeight,ut.mainHeight=ut.height-ut.barHeight,e("set",{type:"window",items:ut})}}});s("uMhA"),s("xJqg");i.a.config.productionTip=!1,i.a.use(K.a,"https://desolate-lake-69712.herokuapp.com",pt),new i.a({el:"#app",router:I,store:pt,components:{App:y},template:"<App/>"})},PcQI:function(t,e){},Qsaf:function(t,e){},Whpl:function(t,e){},avIY:function(t,e){},i10b:function(t,e){},i8ii:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),s.d(e,"boardi",function(){return u}),s.d(e,"boardinit",function(){return h}),s.d(e,"boatinit",function(){return v}),s.d(e,"user",function(){return y}),s.d(e,"game",function(){return b}),s.d(e,"players",function(){return C}),s.d(e,"window",function(){return k}),s.d(e,"setCell",function(){return G}),s.d(e,"delCell",function(){return O}),s.d(e,"autoDisposition",function(){return M}),s.d(e,"finishDisposition",function(){return P}),s.d(e,"clearDisposition",function(){return S}),s.d(e,"newGame",function(){return g});var i=s("fZjL"),a=s.n(i),n=s("7+uW"),o=s("Z8es"),r=s.n(o),l=s("jNuQ"),c=s.n(l),d=["Hector Barbossa","Jack Sparrow","Davy Jones","Calipso","Bootscrap Bill","Blackbeard","Alexander Smollett","Ben Gunn","Billy Bones","Jim Hawkins","John Silver","John Trelawney","David Livesey","Captain Flint"],u={row:[1,2,3,4,5,6,7,8,9,10],col:["a","b","c","d","e","f","g","h","i","j"]},h=function(t){return u.row.map(function(){return u.col.map(function(){return{class:"none"}})})},p={x:["-1-1","-11","1-1","11"],o:["-1-1","-10","-11","0-1","01","1-1","10","11"],plus:["-10","0-1","01","10"]},m=function(t,e){var s=[],i=0===t[0]?0:-1,a=9===t[0]?0:1,n=0===t[1]?0:-1,o=9===t[1]?0:1;if(p[e])for(var r=i;r<=a;r++)for(var l=n;l<=o;l++)0===r&&0===l||p[e].indexOf(""+r+l)>-1&&s.push([t[0]+r,t[1]+l]);return s},f=function(t){return t[0]+""+t[1]},v={1:{},2:{},3:{},4:{},n:{1:[4,0],2:[3,0],3:[2,0],4:[1,0]},c:0,ok:!1},y=n.a.ls.get("user"),b=n.a.ls.get("game"),_=0;y&&y._id&&y.name&&y.version||(b=!1,_=Math.floor(Math.random()*d.length),y={_id:r.a.generate(),name:d[_],version:1},d.splice(_,1),n.a.ls.set("user",y));var g=function(){return _=Math.floor(Math.random()*d.length),(b={_id:r.a.generate(),userid:y._id,turn:"0",players:{},version:0,newgame:!1}).players[y._id]={user:{_id:y._id,name:y.name},board:[h(),h()],boat:c()(v),phase:"disposition"},b.players[0]={user:{name:d[_]},board:[h(),h()],boat:c()(v),phase:"disposition"},b};b&&b._id&&b.players&&b.players[y._id]||(g(),n.a.ls.set("game",b));var w=a()(b.players);w.splice(w.indexOf(y._id),1);var C=[y._id,w.shift()],k={width:0,height:0,cellWidth:0,boardWidth:500,boardMaxWidth:500,land:0,barHeight:0,mainHeight:0},$=function(t){for(var e=[],s=b.players[y._id].boat[t[0]][t[1]],i=s.vector-1,a=0;a<s.size;a++){var n=[s.index[0],s.index[1]];n[i]+=a,e.push(n)}return e},B=function(t){var e=b.players[y._id].board[0][t[0]][t[1]],s=f(t);e.class="boat";var i=[];m(t,"plus").map(function(t){var e=b.players[y._id].board[0][t[0]][t[1]];"boat"===e.class&&i.push(e.boat)});var a={index:t,vector:0,size:1};b.players[y._id].boat[1][s]=a,e.boat=[1,s],i.length&&i.map(function(t){var e,s,i,n,o,r,l,c,d;e=t,s=[a.size,f(a.index)],o=b.players[y._id].boat,r=o[e[0]][e[1]],l=o[s[0]][s[1]],c={index:(i=r.index,n=l.index,i[0]>n[0]||i[1]>n[1]?n:i),vector:function(t,e){return t[0]!==e[0]?1:2}(r.index,l.index),size:r.size+l.size},d=[c.size,f(c.index)],o[d[0]]||(o[d[0]]={}),o[d[0]][d[1]]=c,delete o[e[0]][e[1]],delete o[s[0]][s[1]],$(d).map(function(t){b.players[y._id].board[0][t[0]][t[1]].boat=d}),a=c}),T()},x=function(t){var e=b.players[y._id].boat,s=b.players[y._id].board[0][t[0]][t[1]];s.class="none";var i=[s.boat[0],s.boat[1]];e[i[0]][i[1]].size>1&&function(t){var e=b.players[y._id].boat,s=b.players[y._id].board[0][t[0]][t[1]],i=[{},{}],a=0;$(s.boat).map(function(n){f(n)===f(t)?a++:i[a].index?i[a].size++:i[a]={index:n,size:1,vector:e[s.boat[0]][s.boat[1]].vector}}),i.map(function(t){if(t.index){var s=[t.size,f(t.index)];e[s[0]][s[1]]=t,$(s).map(function(t){b.players[y._id].board[0][t[0]][t[1]].boat=s})}})}(t),delete e[i[0]][i[1]],s.boat=[],T()},E=function(t,e){void 0===e&&(e="x");var s=m(t,e),i=f(t);s.map(function(t){var e=b.players[y._id].board[0][t[0]][t[1]];"none"===e.class&&(e.class="disable"),Array.isArray(e.block)||(e.block=[]),e.block.indexOf(i)<0&&e.block.push(i)})},T=function(){var t=b.players[y._id].boat;t.c++;for(var e=!0,s=1;s<5;s++)t.n[s][1]=a()(t[s]).length,t.n[s][0]!==t.n[s][1]&&(e=!1);t.ok=e},G=function(t){B(t),E(t)},O=function(t){x(t),function(t){var e=m(t,"o"),s=f(t);e.map(function(t){var e=b.players[y._id].board[0][t[0]][t[1]];if("disable"===e.class){var i=e.block.indexOf(s);i>-1&&(e.block.splice(i,1),e.block.length||(e.class="none"))}})}(t)},R=function(t,e,s){for(var i=!0,a=0;a<e;a++){var n=[t[0],t[1]];n[s]+=a,"none"!==b.players[y._id].board[0][n[0]][n[1]].class&&(i=!1)}return i},V=function(t){var e=10-t,s=[],i=[],a=!1;b.players[y._id].board[0].map(function(s,n){s.map(function(s,o){if("none"===s.class&&(n<=e||o<=e)){var r=!0;n>e&&o<=e?r=R([n,o],t,a=1):o>e&&n<=e?r=R([n,o],t,a=0):(a=Math.floor(2*Math.random()),(r=R([n,o],t,a))||(r=R([n,o],t,a=1-a))),r&&i.push([n,o,a])}})});for(var n=Math.floor(Math.random()*i.length),o=0;o<t;o++){var r=[i[n][0],i[n][1]];r[i[n][2]]+=o,s.push(r)}return s},M=function(){var t=b.players[y._id].boat;t[1]={},t[2]={},t[3]={},t[4]={},b.players[y._id].board[0].map(function(t,e){t.map(function(t,e){t.class="none",t.boat=[],t.block=[]})}),a()(t.n).reverse().map(function(e){for(var s=0;s<t.n[e][0];s++){V(e).map(function(t){G(t),E(t,"o")})}})},P=function(){b.players[y._id].board[0].map(function(t,e){t.map(function(t,e){t.block=[],"disable"===t.class&&(t.class="none")})})},S=function(){b.players[y._id].board[0]=h()}},t6BR:function(t,e){},tkzL:function(t,e){},uMhA:function(t,e){},xJqg:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.294a3ad21a4e94009e2c.js.map